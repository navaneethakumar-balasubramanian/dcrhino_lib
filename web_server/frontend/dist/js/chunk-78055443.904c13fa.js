(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78055443"],{"2fdb":function(e,t,a){"use strict";var s=a("5ca1"),n=a("d2c8"),i="includes";s(s.P+s.F*a("5147")(i),"String",{includes:function(e){return!!~n(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"34a7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Blasthole Observations from : "+e._s(e.mine_name)),a("br"),a("span",{staticClass:"body-2 font-weight-light"},[e._v(e._s(e.filtered_data.length)+" results found.")])]),a("v-spacer"),a("v-layout",{attrs:{"align-right":"","justify-end":"",column:"","fill-height":""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("date-range-picker",{ref:"picker",staticStyle:{width:"240px",float:"right","z-index":"1000"},attrs:{"locale-data":{firstDay:1,format:"YYYY-MM-DD"},opens:"left",dateFormat:e.format_available_dates},on:{update:e.updated_date_picker},scopedSlots:e._u([{key:"input",fn:function(t){return a("div",{staticStyle:{"min-width":"200px","text-align":"center"}},[e._v("\n          From : "+e._s(e.dateRange.startDate.substring(0,10))+"  To: "+e._s(e.dateRange.endDate.substring(0,10))+" \n      ")])}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{staticStyle:{"min-width":"240px",float:"right"},attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",loading:e.loading},on:{"click:append":e.searchWeb,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchWeb(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{pagination:e.pagination,headers:e.headers,items:e.filtered_data,"item-key":"bo_id","select-all":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-dialog",{attrs:{scrollable:"","max-width":"300px"},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[a("span",e._g({staticStyle:{cursor:"pointer"},attrs:{ripple:""}},n),[e._v(e._s(t.header.text))])]}}],null,!0),model:{value:t.header.dialog,callback:function(a){e.$set(t.header,"dialog",a)},expression:"props.header.dialog"}},[a("v-card",[a("v-card-title",[e._v("Select "+e._s(t.header.text))]),a("v-divider"),a("v-card-text",{staticClass:"pa-0 pm-0",staticStyle:{height:"300px"}},[a("v-list",{staticClass:"pa-0 pm-0"},[a("v-list-tile",{attrs:{ripple:""}},[a("v-list-tile-action",[a("v-checkbox",{on:{change:function(a){return e.togleAllOnList(t.header)}},model:{value:t.header.allChecked,callback:function(a){e.$set(t.header,"allChecked",a)},expression:"props.header.allChecked"}})],1),a("v-list-tile-title",[e._v("Select all")])],1),a("v-divider"),e._l(t.header.values,(function(s,n){return a("v-list-tile",{key:n,attrs:{ripple:""}},[a("v-list-tile-action",[a("v-checkbox",{on:{change:function(a){return e.changed_filter(s,t.header)}},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"item.checked"}})],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(s.label)+" ")])],1)],1)}))],2)],1)],1)],1)]}},{key:"items",fn:function(t){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"items.selected"}})],1),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.bo_id))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.bench_name))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.pattern_name))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.hole_name))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.hole_id))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.rig_id))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.sensor_id))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.digitizer_id))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e.visible_buttons?a("v-btn",{attrs:{flat:"",color:"light-blue"},on:{click:function(t){return e.process_selection()}}},[e._v("Process selection")]):e._e(),e.visible_buttons?a("v-btn",{attrs:{flat:"",color:"light-blue"},on:{click:function(t){t.stopPropagation(),e.confirm_archive_dialog=!0}}},[e._v("Archive selection")]):e._e(),a("ConfirmArchive",{attrs:{show:e.confirm_archive_dialog}}),a("v-dialog",{attrs:{scrollable:"","max-width":"600px"},model:{value:e.edit_process_flow,callback:function(t){e.edit_process_flow=t},expression:"edit_process_flow"}},[a("v-card",[a("v-card-title",[e._v("Select the process flow to use")]),a("v-divider"),a("v-card-text",{staticClass:"pa-0 pm-0",staticStyle:{height:"300px"}},[a("v-list",{staticClass:"pa-0 pm-0",attrs:{dense:""}},e._l(e.process_flows,(function(t,s){return a("v-list-tile",{key:s,attrs:{ripple:""},on:{click:function(a){return e.process_using(t)}}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{textContent:e._s(t)}})],1)],1)})),1)],1)],1)],1),a("v-snackbar",{attrs:{color:"error",bottom:"",right:"","multi-line":"",timeout:3e3},model:{value:e.warning,callback:function(t){e.warning=t},expression:"warning"}},[e._v(e._s(e.warning_text))]),a("v-snackbar",{attrs:{bottom:"",right:"","multi-line":"",timeout:3e3},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[e._v(e._s(e.message_text))])],1)},n=[],i=(a("5df3"),a("4f7f"),a("75fc")),l=(a("386d"),a("456d"),a("6762"),a("2fdb"),a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ConfirmDialog",{attrs:{title:"Confirm?",description:"Do you really want to archive this selection?",show:e.show}})}),r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v(e._s(e.title))]),a("v-card-text",[e._v("\n      "+e._s(e.description)+"\n    ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(t){e.show=!1}}},[e._v("\n        Disagree\n      ")]),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(t){e.show=!1}}},[e._v("\n        Agree\n      ")])],1)],1)],1)},c=[],d={name:"ConfirmDialog",props:["title","description","show"]},u=d,h=a("2877"),_=a("6544"),f=a.n(_),v=a("8336"),p=a("b0af"),m=a("99d9"),b=a("12b2"),g=a("169a"),x=a("9910"),w=Object(h["a"])(u,o,c,!1,null,null,null),k=w.exports;f()(w,{VBtn:v["a"],VCard:p["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:b["a"],VDialog:g["a"],VSpacer:x["a"]});var C={name:"ConfirmArchive",components:{ConfirmDialog:k},props:["show"]},y=C,S=Object(h["a"])(y,l,r,!1,null,null,null),O=S.exports,V={components:{ConfirmArchive:O},data:function(){return{confirm_archive_dialog:!1,edit_process_flow:!1,select_process_flow:!1,process_flows:[],search:null,blasthole_observations:[],filtered_data:[],clicked_processed_hole_id:!1,show_dialog:!1,show_dialog_comparison:!1,selected:[],pagination:{rowsPerPage:25},warning:null,warning_text:null,message:null,message_text:null,headers:[],confirm_process_flow:null,dateRange:{startDate:"",endDate:""}}},created:function(){this.$store.dispatch("GET_BLASTHOLE_OBSERVATIONS",{mine_name:this.mine_name})},props:["mine_name"],methods:{confirm_process:function(e){self.confirm_process_flow=e,this.select_process_flow=!1},process_selection:function(){var e=this,t={mine_name:this.mine_name,responseType:"arraybuffer"};axios.post("/api/process_flows",t).then((function(t){e.process_flows=t.data.process_flows})),this.select_process_flow=!0},process_using:function(e){var t=this,a=this,s={mine_name:this.mine_name,blasthole_obs:this.selected,process_flow:e};axios.post("/api/process_holes_with",s).then((function(e){1==e.data.data?(a.message=!0,a.message_text="Added "+t.selected.length+" blastholes to processing queue."):(a.warning=!0,a.warning_text="Fail to add "+t.selected.length+" blastholes to processing queue.")})),this.select_process_flow=!1},moment:function(e){return window.moment.unix(e)},togleAllOnList:function(e){for(var t in e.values)e.values[t].checked=e.allChecked;this.changed_filter()},changed_filter:function(){var e=[];for(var t in this.server_data){t=this.server_data[t];var a=!0;for(var s in this.headers)s=this.headers[s],Object.keys(s).includes("values")&&Object.keys(s.values).includes(t[s.value])&&0==s.values[t[s.value]].checked&&(a=!1);a&&e.push(t)}for(var n in this.filtered_data=e,this.headers)n=this.headers[n],n.allChecked=this.allChecked(n.values)},allChecked:function(e){for(var t in e)if(0==e[t].checked)return!1;return!0},get_processed_selection:function(){if(this.selected.length>1){var e={mine_name:this.mine_name,processed_holes:this.selected,responseType:"arraybuffer"};axios.post("/get_processed_csv",e).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","processed.csv"),document.body.appendChild(a),a.click()}))}else this.warning=!0,this.warning_text="Select a few holes to download."},searchWeb:function(){this.$store.dispatch("GET_PROCESSED",{mine_name:this.mine_name,search:this.search})},showProcessedHole:function(e){this.show_dialog=!0,this.clicked_processed_hole_id=e,this.$store.dispatch("GET_HOLE_INFO",{mine_name:this.mine_name,processed_hole_id:e})}},watch:{server_data:function(e,t){function a(e){var t={};for(var a in e)t[e[a]]={label:e[a],checked:!0};return t}if(e){var s=e,n=Object(i["a"])(new Set(s.map((function(e){return e.bo_id})))),l=(Object(i["a"])(new Set(s.map((function(e){return e.flow_id})))),Object(i["a"])(new Set(s.map((function(e){return e.bench_name}))))),r=Object(i["a"])(new Set(s.map((function(e){return e.pattern_name})))),o=Object(i["a"])(new Set(s.map((function(e){return e.hole_name})))),c=Object(i["a"])(new Set(s.map((function(e){return e.hole_id})))),d=Object(i["a"])(new Set(s.map((function(e){return e.rig_id})))),u=Object(i["a"])(new Set(s.map((function(e){return e.sensor_id})))),h=Object(i["a"])(new Set(s.map((function(e){return e.digitizer_id}))));this.headers=[{text:"Id",value:"bo_id",sortable:!1,values:a(n)},{text:"Bench",value:"bench_name",sortable:!1,values:a(l),allChecked:!0},{text:"Pattern",value:"pattern_name",sortable:!1,values:a(r),allChecked:!0},{text:"Hole_name",value:"hole_name",sortable:!1,values:a(o),allChecked:!0},{text:"Hole_id",value:"hole_id",sortable:!1,values:a(c),allChecked:!0},{text:"Rig",value:"rig_id",sortable:!1,values:a(d),allChecked:!0},{text:"Sensor",value:"sensor_id",sortable:!1,values:a(u),allChecked:!0},{text:"Digitizer",value:"digitizer_id",sortable:!1,values:a(h),allChecked:!0}],this.filtered_data=e}else this.filtered_data=[]}},computed:{visible_buttons:function(){return this.selected.length>0},server_data:function(){return this.$store.state.blasthole_observations.blasthole_observations},loading:function(){return this.$store.state.blasthole_observations.loading}}},T=V,j=a("ac7c"),D=a("8fea"),E=a("ce7e"),A=a("0e8f"),L=a("a722"),R=a("8860"),$=a("ba95"),P=a("40fe"),F=a("5d23"),B=a("2db4"),z=a("2677"),H=a("71d9"),Y=a("2a7f"),G=Object(h["a"])(T,s,n,!1,null,null,null);t["default"]=G.exports;f()(G,{VBtn:v["a"],VCard:p["a"],VCardText:m["b"],VCardTitle:b["a"],VCheckbox:j["a"],VDataTable:D["a"],VDialog:g["a"],VDivider:E["a"],VFlex:A["a"],VLayout:L["a"],VList:R["a"],VListTile:$["a"],VListTileAction:P["a"],VListTileContent:F["a"],VListTileTitle:F["b"],VSnackbar:B["a"],VSpacer:x["a"],VTextField:z["a"],VToolbar:H["a"],VToolbarTitle:Y["a"]})},"456d":function(e,t,a){var s=a("4bf8"),n=a("0d58");a("5eda")("keys",(function(){return function(e){return n(s(e))}}))},5147:function(e,t,a){var s=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[s]=!1,!"/./"[e](t)}catch(n){}}return!0}},"5eda":function(e,t,a){var s=a("5ca1"),n=a("8378"),i=a("79e5");e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],l={};l[e]=t(a),s(s.S+s.F*i((function(){a(1)})),"Object",l)}},6762:function(e,t,a){"use strict";var s=a("5ca1"),n=a("c366")(!0);s(s.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},aae3:function(e,t,a){var s=a("d3f4"),n=a("2d95"),i=a("2b4c")("match");e.exports=function(e){var t;return s(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},d2c8:function(e,t,a){var s=a("aae3"),n=a("be13");e.exports=function(e,t,a){if(s(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(e))}}}]);
//# sourceMappingURL=chunk-78055443.904c13fa.js.map