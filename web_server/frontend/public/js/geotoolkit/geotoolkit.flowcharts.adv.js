/* tslint:disable */
/* eslint-disable */
/**
 * Copyright: Copyright (c) 2016 by INT, Inc.  All rights reserved.<br>
 * Company: INT, Inc. <br>
 * INT PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */
(function (root, factory) {
if (root && typeof root['define'] === 'function') {
    root['define']("geotoolkit.flowcharts", ["geotoolkit","geotoolkit.controls","geotoolkit.data","geotoolkit.pdf","geotoolkit.svg","geotoolkit.widgets"], function() {
      root._geo = factory(root, root._geo);
      root.geotoolkit = root._geo.geotoolkit || root.geotoolkit;
      return root.geotoolkit;
    });
} else if (typeof module !== 'undefined' && typeof module.exports === 'object') {
    var m = factory(root, root && root._geo);
    module.exports._geo = m;
    if (root) { 
        root._geo = module.exports._geo;
        if(!root.geotoolkit) {
            root.geotoolkit = module.exports._geo.geotoolkit;
        }
    }
    if (!module.exports.geotoolkit) module.exports.geotoolkit=module.exports._geo.geotoolkit;
} else {
    root._geo = factory(root, root._geo);
    root.geotoolkit = root._geo.geotoolkit || root.geotoolkit;
    return root.geotoolkit;
}

}(typeof window !== "undefined" ? window : undefined, function (window, _geo) {
var _geo=_geo||{};_geo.c.Va=_geo.c.Va||{};_geo.c.Va.vd=_geo.c.Va.vd||{};_geo.c.Va.$=_geo.c.Va.$||{};_geo.c.Va.$.bd=_geo.c.Va.$.bd||{};_geo.c.Va.$.uf=_geo.c.Va.$.uf||{};_geo.c.Va.$.uf.iC=_geo.c.Va.$.uf.iC||{};_geo.c.Va.$.lma=_geo.c.Va.$.lma||{};_geo.c.Va.plugins=_geo.c.Va.plugins||{};_geo.c.Va.plugins.Xt=_geo.c.Va.plugins.Xt||{};_geo.c.Va.xd=_geo.c.Va.xd||{};_geo.c.Va.xd.hg=_geo.c.Va.xd.hg||{};_geo.c.Va.kD=_geo.c.Va.kD||{};
_geo.c.Va.vd.kS=function(){function b(){}b.NU=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})};return b}();_geo.c.Va.vd.Lwa=function(){function b(){this.f9a=[]}b.prototype.tb=function(a){this.f9a.push(a)};b.prototype.pb=function(a){this.f9a=this.f9a.filter(function(b){return b!==a})};b.prototype.FGa=function(a){this.f9a.slice(0).forEach(function(b){return b(a)})};return b}();
_geo.c.Va.vd.wm=function(){function b(){}b.s6a=function(a){return a.reduce(function(a,e){return a.concat(Array.isArray(e)?b.s6a(e):e)},[])};b.QT=function(a,b,e,d,f){null==f?(a.push(e),b.push(d)):(a.splice(f,0,e),b.splice(f,0,d))};b.hab=function(a,b,e,d){null==d&&(d=1);a.splice(e,d);b.splice(e,d)};b.OEa=function(a,g,e){for(var d=[],f=[],h=0;h<a.length;h++)if(2>d.length)d.push(a[h]),f.push(g[h]);else{var l=d.length;!e&&b.r9b(d[l-2],f[l-2],d[l-1],f[l-1],a[h],g[h])||e&&b.TTb(d[l-2],f[l-2],a[h],g[h],d[l-
1],f[l-1],a[h],g[h],.5,!1)?(d[l-1]=a[h],f[l-1]=g[h]):(d.push(a[h]),f.push(g[h]))}return{x:d,y:f}};b.r9b=function(a,b,e,d,f,h){return 1>Math.abs((b-d)*(a-f)-(b-h)*(a-e))};b.TTb=function(a,b,e,d,f,h,l,k,m,q){void 0===m&&(m=0);void 0===q&&(q=!0);if((Math.abs(a-e)<_geo.c.Va.vd.wm.EPSILON||Math.abs(f-l)<_geo.c.Va.vd.wm.EPSILON)&&Math.abs(b-d)<_geo.c.Va.vd.wm.EPSILON&&Math.abs(h-k)<_geo.c.Va.vd.wm.EPSILON){if((0<b-d===0<h-k||!q)&&Math.abs((a-e)/(b-d)-(f-l)/(h-k))<.05*m)return!0}else if((Math.abs(b-d)<_geo.c.Va.vd.wm.EPSILON||
Math.abs(h-k)<_geo.c.Va.vd.wm.EPSILON)&&Math.abs(a-e)>_geo.c.Va.vd.wm.EPSILON&&Math.abs(f-l)>_geo.c.Va.vd.wm.EPSILON){if((0<a-e===0<f-l||!q)&&Math.abs((b-d)/(a-e)-(h-k)/(f-l))<.05*m)return!0}else if(!q||0<b-d===0<h-k&&0<a-e===0<f-l)return Math.abs((b-d)/(a-e)-(h-k)/(f-l))<.05*m||Math.abs((a-e)/(b-d)-(f-l)/(h-k))<.05*m;return!1};b.findIndex=function(a,b){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(a),d=e.length>>>0;if("function"!==typeof b)throw new TypeError("predicate must be a function");
for(var f=b,h=0;h<d;){var l=e[h];if(b.call(f,l,h,e))return h;h++}return-1};b.find=function(a,b){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(a),d=e.length>>>0;if("function"!==typeof b)throw new TypeError("predicate must be a function");for(var f=b,h=0;h<d;){var l=e[h];if(b.call(f,l,h,e))return l;h++}};return b}();_geo.c.Va.vd.wm.bW=9007199254740991;_geo.c.Va.vd.wm.Pwa=-9007199254740991;_geo.c.Va.vd.wm.EPSILON=1E-14;
_geo.c.Va.vd.nKb=function(){function b(){this.Gib=0;this.JEa=this.dda=null}b.prototype.enqueue=function(a){a={value:a};var b=this.JEa;this.JEa?(this.JEa=a,b.dda=a):this.JEa=this.dda=a;this.Gib++};b.prototype.Ypb=function(){var a=this.dda.value;this.dda=this.dda.dda;this.dda||(this.JEa=null);this.Gib--;return a};b.prototype.C7b=function(){if(this.dda)return this.dda.value};b.prototype.Jd=function(){return null===this.JEa};b.prototype.aC=function(){return this.Gib};return b}();
_geo.c.Va.$.Igb=function(){function b(){}_geo.c.ja(b,"geotoolkit.flowcharts.shapes.ResourceLoader");b.P5b=function(a){if(b.ULa.get(a))return b.ULa.get(a);var g=new _geo.c.f.Promise(function(e,d){if(b.Vkb.Hz(a))e(b.Vkb.get(a));else{var f=new _geo.c.window.XMLHttpRequest;f.onloadend=function(d){b.Vkb.put(a,f.responseText);b.ULa.remove(a);e(f.responseText)};f.onerror=function(e){b.ULa.remove(a);d(e)};f.open("GET",a);f.send()}});b.ULa.put(a,g);return g};b.Vkb=new _geo.c.f.dK;b.ULa=new _geo.c.f.dK;return b}();
_geo.c.Va.$.R3=function(){function b(){}_geo.c.ja(b,"geotoolkit.flowcharts.shapes.IComponent");b.prototype.sD=_geo.c.Ua;b.prototype.qU=_geo.c.Ua;b.prototype.ny=_geo.c.Ua;b.prototype.RQ=_geo.c.Ua;b.prototype.kx=_geo.c.Ua;b.prototype.aV=_geo.c.Ua;b.prototype.ce=_geo.c.Ua;b.prototype.gJ=_geo.c.Ua;b.prototype.Gu=_geo.c.Ua;b.prototype.jZ=_geo.c.Ua;b.prototype.Ec=_geo.c.Ua;b.prototype.zH=_geo.c.Ua;b.prototype.By=_geo.c.Ua;b.prototype.dY=_geo.c.Ua;return b}();_geo.c.Va.$.bd.cP={TJ:0,iA:1};
_geo.c.Va.$.bd.Fea={rJb:0,rZa:1,Heb:2};_geo.c.Va.$.bd.Eea=function(){function b(a,b,e,d){this.js=a;this.TL=b;this.bB=e;this.nta=d;this.Yja=null}_geo.c.ja(b,"geotoolkit.flowcharts.shapes.connectors.LinkConnection");b.prototype.re=function(){return this.js};b.prototype.k1b=function(){return this.TL};b.prototype.N0b=function(){return this.bB};b.prototype.O0b=function(){return this.nta};b.prototype.TCa=function(){return this.js?this.js.zd():null};return b}();
_geo.c.Va.$.zl=function(){function b(a){a=_geo.c.yc(a);_geo.c.V.Ya.call(this,a);this.iB=[];this.iB.length=5;this.Ed(!1);this.szc();this.ka(a);return this}_geo.c.na(b,_geo.c.V.Ya);_geo.c.Rg(b,_geo.c.Va.$.R3);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.DiagramVisual");b.prototype.ndb=function(){if(this.ql&&!this.CSb){var a=this.ha();if(a){this.CSb=!0;this.iB[0]=a.pi();this.iB[1]=a.Zr();this.iB[2]=a.Do();this.iB[3]=a.Xq();this.iB[4]=a.Xh();var b=this.Za();if(b)for(var e=0;e<this.iB.length;e++)this.iB[e]=
b.hb(this.iB[e]);b=_geo.c.f.sa.Jm(this.iB[0],this.iB[1]);e=_geo.c.f.sa.Jm(this.iB[0],this.iB[3]);this.ql.gd(b,e);b=a.Xh();e=_geo.c.f.Ca.ub;switch(this.ql.ec().wr()){case _geo.c.attributes.kb.DV.bfa:case _geo.c.attributes.kb.DV.De:b=a.Nia();e=_geo.c.f.Ca.We;break;case _geo.c.attributes.kb.DV.iA:case _geo.c.attributes.kb.DV.Pd:b=a.hca();e=_geo.c.f.Ca.eh;break;case _geo.c.attributes.kb.DV.ub:b=a.Xh();e=_geo.c.f.Ca.ub;break}this.ql.Ic(b);this.ql.Ld(e);this.CSb=!1}}};b.prototype.szc=function(){if(!this.ql){var a=
new _geo.c.V.$.Text({text:""});a.ec().Hf("center");a.ec().GFa(1);this.DEBUG&&a.ka({fillstyle:new _geo.c.attributes.Ha({color:"rgba(0,255,0, 0.2)"}),linestyle:new _geo.c.attributes.za({color:"rgba(0, 0, 255, 1)"})});a.Cw(!0);if(this.ha()){var b=this.ha();a.Ic(b.Xh());a.gd(b.width,b.height)}a.Bj(_geo.c.V.$.Text.ef.D_);a.Ae("TEXT_SHAPE");this.PCb(a)}};b.prototype.fb=function(a){this.O4=a.O4;this.Qu(a.Xe?a.Xe.clone():null);this.t$=a.t$;this.s$=a.s$;this.U4=a.U4.clone();this.uN=a.uN?a.uN.slice():[];this.oI=
a.oI?a.oI.slice().map(function(a){return new _geo.c.f.sa(a.ga(),a.ea())}):null;this.LB=a.LB?a.LB.clone():null;a.ql&&this.PCb(a.ql.clone());this.Ga(this.Xe&&this.Xe.ha()?this.Xe.ha():new _geo.c.f.Rect(0,0,1,1));this.zH(a.d6);this.Ae(_geo.c.Va.vd.kS.NU());return this};b.prototype.Qa=function(a,b){null!=this.Xe&&this.Xe.Qa(a,b);_geo.c.V.Ya.prototype.Qa.call(this,a,b);this.WBc!==this.Za()&&(this.Pa("StateUpdated",this),this.WBc=this.Za());return this};b.prototype.BTa=function(a){this.ql&&(a.Ji(a.$a().yb(this.ha())),
a.filter(this.ql)&&this.ql.Aa(a))};b.prototype.Aa=function(a){var b=null!=this.sb()?a.Qc(this.sb()):a;b.save();null!=this.Xe&&this.Xe.Aa(b);_geo.c.V.Ya.prototype.Aa.call(this,a);this.fl(a);this.BTa(b);this.Pk(a);b.restore()};b.prototype.sD=function(){return this.t$};b.prototype.qU=function(){return this.O4};b.prototype.ny=function(){return this.s$};b.prototype.RQ=function(){return this.uN};b.prototype.aV=function(a){this.U4=a?a:new _geo.c.f.Fc(50,50);return this};b.prototype.kx=function(){return this.U4};
b.prototype.ce=function(){return this.Xe};b.prototype.jZ=function(a){this.oI=a;return this};b.prototype.Gu=function(){return this.oI};b.prototype.gJ=function(){return this.LB};b.prototype.dY=function(){return this.xKa};b.prototype.zH=function(a){this.d6=a;return this};b.prototype.By=function(){return this.d6};b.prototype.qm=function(){return this.ql};b.prototype.Ec=function(a){var b=!1;"string"===typeof a&&a!==this.qm().ne()&&(this.qm().Ec(a),b=!0);a.hasOwnProperty("text")&&a.text!==this.qm().ne()&&
(this.qm().Ec(a.text),b=!0);a.hasOwnProperty("style")&&(this.qm().Ob(a.style),b=!0);b&&(this.ndb(),this.ma(this.qm().ha()));return this};b.prototype.ne=function(){return{text:this.qm()?this.qm().ne():null,style:this.qm()?this.qm().ec():null}};b.Pvc=function(a,b){void 0===b&&(b=!0);if((0,window.isNaN)(a)||!(0,window.isFinite)(a))return a;var e=b?360:2*Math.PI;return a-Math.floor(a/e)*e};b.Rxc=function(a,b){var e=b.ga()-a.ga(),d=b.ea()-a.ea();return Math.atan2(d,e)};b.prototype.Qu=function(a){this.Xe!==
a&&(null!=this.Xe&&this.Xe.pg(null),this.Xe=a,null!=this.Xe&&this.Xe.pg(this))};b.prototype.PCb=function(a){this.ql&&this.pb(_geo.c.V.Node.aa.lP,this.ndb.bind(this));if(this.ql=a)a.Ae("TEXT_SHAPE"),this.ndb(),this.tb(_geo.c.V.Node.aa.lP,this.ndb.bind(this))};b.prototype.ka=function(a){if(!a)return this;a=_geo.c.yc(a);a.hasOwnProperty("prototypename")&&(this.O4=a.prototypename,this.Qb(a.prototypename));a.hasOwnProperty("geometry")&&this.Qu(a.geometry);a.hasOwnProperty("text")&&("string"===typeof a.text?
this.ql.Ec(a.text):(this.ql.Ec(a.text.text||""),a.text.style&&this.ql.Ob(a.text.style)));a.hasOwnProperty("prototypeid")&&(this.t$=a.prototypeid);a.hasOwnProperty("category")&&(this.s$=a.category);a.hasOwnProperty("defaultsize")&&(this.U4=a.defaultsize);a.hasOwnProperty("searchkeywords")&&(this.uN=a.searchkeywords);a.hasOwnProperty("linkpoints")&&(this.oI=a.linkpoints);a.hasOwnProperty("outline")&&(this.LB=a.outline);this.Xe&&a.hasOwnProperty("geometry")&&this.Xe.ka(a.geometry);this.Ga(this.Xe&&this.Xe.ha()?
this.Xe.ha():new _geo.c.f.Rect(0,0,1,1));a.hasOwnProperty("url")&&this.zH(a.url);a.hasOwnProperty("id")?this.Ae(a.id):this.zd()||this.Ae(_geo.c.Va.vd.kS.NU());return this};b.prototype.la=function(){var a={};this.Xe&&(a.geometry=this.Xe.la());a.prototypename=this.O4;a.geometry=this.Xe;a.prototypeid=this.t$;a.category=this.s$;a.defaultsize=this.U4;a.searchkeywords=this.uN;a.linkpoints=this.oI?this.oI.slice().map(function(a){return new _geo.c.f.sa(a.ga(),a.ea())}):null;a.outline=this.LB;a.text={text:this.ql.ne(),
style:this.ql.ec()};a.url=this.d6;return a};return b}();_geo.c.Va.$.zl.yIc=new _geo.c.f.Fc(50,50);
_geo.c.Va.$.dfa=function(){function b(a){a=_geo.c.Ja(a,{islinkpointsrelative:!0},!0);this.Ooa=!1;_geo.c.Va.$.zl.call(this,a);a.hasOwnProperty("islinkpointsrelative")&&(this.kga=a.islinkpointsrelative);a.hasOwnProperty("svgdata")&&this.setData(a.svgdata);a.hasOwnProperty("justdeserialized")&&(this.C5b=a.justdeserialized);a.hasOwnProperty("referencesize")&&(this.iaa=a.referencesize)}_geo.c.na(b,_geo.c.Va.$.zl);_geo.c.Rg(b,_geo.c.Va.$.R3);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.SvgDiagramVisual");
b.prototype.setData=function(a){this.Cmb=a;this.Ooa=!1;if(a)try{this.v7b(a)}catch(b){_geo.c.warn("FlowCharts.SvgDiagramVisual: could not parse SVG data",a)}};b.prototype.fb=function(a){this.kga=a.kga;this.Ooa=a.Ooa;this.Xe||this.Qu(a.Xe?a.Xe.clone():new _geo.c.V.Ya);a.Cmb&&this.setData(a.Cmb);this.oI=a.kga?a.t8a().slice().map(function(a){return new _geo.c.f.sa(a.ga(),a.ea())}):this.Gu()?a.Gu().slice().map(function(a){return new _geo.c.f.sa(a.ga(),a.ea())}):null;this.iaa=a.iaa?a.iaa.clone():this.U4?
this.U4.clone():new _geo.c.f.Fc(100,100);return this};b.prototype.GAc=function(){this.By()?_geo.c.Va.$.Igb.P5b(this.By()).then(function(a){this.v7b(a)}.bind(this))["catch"](function(a){return _geo.c.log("SvgVisual plugin: url '"+this.By()+"' can not be resolved ("+a+")")}.bind(this)):_geo.c.log("SvgVisual plugin: url is not defined")};b.prototype.v7b=function(a){var b=new _geo.c.dc.ena;b.parse(this.ce(),a);b=this.ce().ha();this.Ga(b);this.ql&&this.ha()&&(this.ql.Ic(this.ha().Xh()),this.ql.gd(b.width,
b.height));a=0!==b.ba()?this.U4.width/b.width:1;var b=0!==b.da()?this.U4.height/b.height:1,e=this.kc()?this.kc().clone():new _geo.c.f.Fa;this.C5b||(this.je(_geo.c.f.Fa.Mj(e.Ti(),e.si()).Gz(_geo.c.f.Fa.Lm(a,b))),this.C5b=!1);this.Ooa=!0;this.Pa("StateUpdated",this,this.ha())};b.prototype.zH=function(a){a!==this.By()&&(this.Xe||(this.Xe=new _geo.c.V.Ya),_geo.c.Va.$.zl.prototype.zH.call(this,a),this.Ooa=!1,this.GAc());return this};b.prototype.Aa=function(a){this.Ooa&&_geo.c.Va.$.zl.prototype.Aa.call(this,
a)};b.prototype.I7a=function(){return this.kga};b.prototype.t8a=function(){if(this.kga)return _geo.c.Va.$.zl.prototype.Gu.call(this);var a=this.ha();return this.Gu().map(function(b){return new _geo.c.f.sa((b.ga()-a.ga())/a.ba(),(b.ea()-a.ea())/a.da())})};b.prototype.Gu=function(){if(this.kga){var a=_geo.c.Va.$.zl.prototype.Gu.call(this);a&&a.length||(a=b.Auc);for(var g=[],e=this.Ooa?this.ha():new _geo.c.f.Rect(0,0,this.iaa.width,this.iaa.height),d=0;d<a.length;d++){var f=a[d];g.push(new _geo.c.f.sa(e.ga()+
e.ba()*f.ga(),e.ea()+e.da()*f.ea()))}return g}return _geo.c.Va.$.zl.prototype.Gu.call(this)};b.prototype.ka=function(a){if(null==a)return this;a=_geo.c.yc(a);_geo.c.Va.$.zl.prototype.ka.call(this,a);a.hasOwnProperty("islinkpointsrelative")&&(this.kga=a.islinkpointsrelative);a.hasOwnProperty("svgdata")&&this.setData(a.svgdata);a.hasOwnProperty("referencesize")?this.iaa=a.referencesize:this.iaa||(this.iaa=a.defaultsize);return this};b.prototype.la=function(){var a=_geo.c.Mc(this)||{};a.referencesize=
this.iaa;a.islinkpointsrelative=this.kga;a.svgdata=this.Cmb;return a};return b}();_geo.c.Va.$.dfa.Auc=[new _geo.c.f.sa(.5,0),new _geo.c.f.sa(.5,1),new _geo.c.f.sa(0,.5),new _geo.c.f.sa(1,.5)];_geo.c.Va.$.bd.$Z=function(){function b(){}_geo.c.ja(b,"geotoolkit.flowcharts.shapes.connectors.ILink");_geo.c.na(b,_geo.c.Va.$.R3);b.prototype.Bia=_geo.c.Ua;b.prototype.TD=_geo.c.Ua;return b}();_geo.c.Va.$.bd.aa={Eeb:"Disconnected",dGb:"Connected"};
_geo.c.Va.$.bd.aW=function(){function b(a){_geo.c.V.$.hr.call(this,a);this.yuc=new _geo.c.attributes.za("rgba(100, 100, 100, 1)",3);this.xuc=new _geo.c.attributes.Ha("rgba(100, 100, 100, 1)");this.Loa=_geo.c.Va.$.bd.Fea.rZa;this.qQ=0;this.uga=_geo.c.Va.$.uf.G9.oE;this.uN=[];this.oI=[new _geo.c.f.sa(0,0),new _geo.c.f.sa(0,0)];this.Ycc=10;this.Wcc=8;this.Kn=[null,null];this.ah(a)}_geo.c.na(b,_geo.c.V.$.hr);_geo.c.Rg(b,_geo.c.Va.$.bd.$Z);_geo.c.ja(b,"geotoolkit.flowcharts.LinkVisual");var a=_geo.c.Va.$.bd.cP;
b.prototype.sD=function(){return this.t$};b.prototype.qU=function(){return this.O4};b.prototype.ny=function(){return this.s$};b.prototype.RQ=function(){return this.uN};b.prototype.kx=function(){var a=this.ha();return new _geo.c.f.Fc(a.ba(),a.da())};b.prototype.aV=function(a){return this};b.prototype.Ec=function(a){return this};b.prototype.ce=function(){return this};b.prototype.Gu=function(){var a=this.dg().length-1;this.oI[0].lb(this.dg()[0],this.Yg()[0]);this.oI[1].lb(this.dg()[a],this.Yg()[a]);
return[this.oI[0],this.oI[1]]};b.prototype.jZ=function(a){return this};b.prototype.gJ=function(){return this.LB};b.prototype.dY=function(){return this.xKa};b.prototype.zH=function(a){this.d6=a;return this};b.prototype.By=function(){return this.d6};b.prototype.qm=function(){return this.ql};b.prototype.S7a=function(){return this.uga};b.prototype.Bbb=function(a){this.uga=a;return this};b.prototype.xAb=function(a){this.boa=a;return this};b.prototype.Y2b=function(){return{width:this.Ycc,height:this.Wcc}};
b.prototype.CBb=function(a){this.Loa=null===a||void 0===a?_geo.c.Va.$.bd.Fea.rJb:a;return this};b.prototype.Etb=function(){return this.Loa};b.prototype.I7=function(){return this.qQ};b.prototype.kla=function(a){if(null===a||void 0===a||0>a)a=0;this.qQ!==a&&(this.ma(),this.qQ=a,this.ma());return this};b.prototype.ha=function(){var a=_geo.c.V.$.hr.prototype.ha.call(this).clone(),b=this.ab()?this.ab().ba()/2:.5;a.de(a.ba()<_geo.c.Va.vd.wm.EPSILON?1E-5:b,a.da()<_geo.c.Va.vd.wm.EPSILON?1E-5:b);this.qQ&&
a.de(this.qQ,this.qQ);return a};b.prototype.ah=function(a){a&&(this.O4=a.prototypeName,this.Xe=a.geometry,this.t$=a.prototypeId,this.s$=a.category,this.xKa=a.defaultIconSize,this.uN=a.searchKeywords,this.oI=a.linkPoints,this.LB=a.outline,this.d6=a.url,this.Bbb(a.linkType),a.geometry instanceof _geo.c.V.$.hr&&this.ka(a.geometry.la()),this.Qb(a.prototypeName),this.Loa=null!=a.linkingMode?a.linkingMode:_geo.c.Va.$.bd.Fea.rZa,this.qQ=a.tubingWidth,this.Ai());this.yPb=function(){this.TD(!0)}.bind(this);
this.Ae(a&&a.id?a.id:_geo.c.Va.vd.kS.NU())};b.prototype.clone=function(){var a=new b({prototypeName:this.O4,geometry:this.Xe?this.Xe.clone():null,prototypeId:this.t$,category:this.s$,defaultSize:this.U4,defaultIconSize:this.xKa,searchKeywords:this.uN?this.uN.slice():[],linkPoints:this.oI?this.oI.slice():null,outline:this.LB?this.LB.clone():null,linkingMode:this.Loa,tubingWidth:this.qQ,url:this.d6,linkType:this.uga});a.xAb(this.boa);return a};b.prototype.va=function(){for(var a=_geo.c.Va.vd.wm.bW,
b=_geo.c.Va.vd.wm.bW,d=_geo.c.Va.vd.wm.Pwa,f=_geo.c.Va.vd.wm.Pwa,h=this.dg(),l=this.Yg(),k=0;k<h.length;k++)a>h[k]&&(a=h[k]),b>l[k]&&(b=l[k]),d<h[k]&&(d=h[k]),f<l[k]&&(f=l[k]);return new _geo.c.f.Rect(a,b,d,f)};b.prototype.Aa=function(a){_geo.c.V.$.hr.prototype.Aa.call(this,a);this.CEc(a)};b.prototype.CEc=function(a){a=this.sb()?a.Qc(this.sb()):a;this.fl(a);this.Loa!==_geo.c.Va.$.bd.Fea.rZa&&this.Loa!==_geo.c.Va.$.bd.Fea.Heb||this.T8b(a,!1);this.Loa===_geo.c.Va.$.bd.Fea.Heb&&this.T8b(a,!0);this.Pk(a)};
b.prototype.T8b=function(a,b){var d=this.Za()?this.Za():new _geo.c.f.Fa,f=d.me(),h=this.dg(),l=this.Yg(),k=b?d.Vf(h[0],l[0]).clone():d.Vf(h[h.length-1],l[l.length-1]).clone(),d=b?d.Vf(h[1],l[1]).clone():d.Vf(h[h.length-2],l[l.length-2]).clone(),h=Math.atan2(k.ea()-d.ea(),k.ga()-d.ga()),d=this.Ycc+this.ab().ba()/2,l=this.Wcc+this.ab().ba()/2,d=[-d,0,-d],l=[-l/2,0,l/2],h=_geo.c.f.Fa.hp(h,0,0),k=_geo.c.f.Fa.Mj(k.ga(),k.ea());h.tO(k).tO(f).EGa(d,l,d.length);this.vt?this.vt.ka({x:d,y:l,fillstyle:{color:this.ab()?
this.ab().Kc():"gray"},linestyle:this.ab()}):this.vt=new _geo.c.V.$.If({x:d,y:l,fillstyle:{color:this.ab()?this.ab().Kc():"gray"},linestyle:this.ab()});this.vt.Aa(a)};b.prototype.Iha=function(a,b,d){if(!d||!a)return!1;var f;return null!==b&&void 0!==b?(this.Kn[b]&&(f=this.Kn[b].Yja,this.QX(b)),a.tb("StateUpdated",this.yPb),this.Kn[b]=new _geo.c.Va.$.bd.Eea(a,d,b,this),this.Kn[b].Yja=f,this.TD(!0),this.Pa(_geo.c.Va.$.bd.aa.dGb,this,{linkSide:b,visual:a,modelPoint:d}),!0):!1};b.prototype.Bia=function(){return this.Kn};
b.prototype.QX=function(b){if(null!==b){var e=this.Kn[b];if(!e)return;if(!e.js){this.Kn[b]=null;this.Pa(_geo.c.Va.$.bd.aa.Eeb,this,{linkSide:b});return}this.Kn[a.TJ]&&this.Kn[a.iA]&&this.Kn[a.TJ].js===this.Kn[a.iA].js||e.js.pb("StateUpdated",this.yPb);this.Kn[b]=null;this.Pa(_geo.c.Va.$.bd.aa.Eeb,this,{linkSide:b})}this.TD(!0)};b.prototype.bQa=function(a){for(var b=[],d=0,f=this.Kn;d<f.length;d++){var h=f[d];h&&h.TCa()===a.zd()&&b.push(h.bB===_geo.c.Va.$.bd.cP.TJ?0:this.dg().length-1)}return b};b.prototype.TD=
function(a){if(!this.ONa){this.ONa=!0;for(var b=!1,d=0;d<this.Kn.length;d++){var f=this.Kn[d];if(f&&f.js&&f.TL){var h=f.js.Za().yb(f.js.ha());if(a||!h.Ij(f.Yja,1))b||this.ma(),b=this.getParent()?this.getParent().Za().Ie(f.js.Za().hb(f.TL)):f.js.kc()?f.js.kc().hb(f.TL):f.TL,this.Tg(!1),this.Rca(f.bB,b),this.Tg(!0),f.Yja=h,b=!0}}b&&(this.ma(),this.Qa());this.ONa=!1}};b.prototype.Rca=function(a,b){var d=this.dg().slice(),f=this.Yg().slice(),h=_geo.c.Va.vd.wm.QT,l=_geo.c.Va.vd.wm.hab,k=a===_geo.c.Va.$.bd.cP.TJ,
m=k?0:d.length-1,q=k?Math.min(3,d.length-1):Math.max(0,d.length-1-3),p=this.Za(),u=p.me(),t=this.boa?this.boa.Uc().Za():new _geo.c.f.Fa,r=t.me(),n=this.Ju.Ie(b),v=n.ga(),n=n.ea(),r=_geo.c.f.Fa.multiply(r,p);if(this.uga===_geo.c.Va.$.uf.G9.Jr)d[m]=v,f[m]=n;else{var p=d[q],q=f[q],w=p+(v-p)/2,x=q+(n-q)/2;if(this.boa)if(this.userTouched)for(m=2<d.length?d[k?2:d.length-3]:d[k?0:d.length-1],v=2<f.length?f[k?2:f.length-3]:f[k?0:f.length-1],2<d.length&&l(d,f,k?0:d.length-2,2),l=this.boa.iia(r.Vf(m,v),b,[],
[this]),v=0;v<l.length;v++)m=u.hb(t.hb(l[v])),h(d,f,m.x,m.y,k?0:void 0);else if((r=k?this.boa.iia(b,r.hb(new _geo.c.f.sa(d[d.length-1],f[f.length-1])),this.Kn[0]?[this.Kn[0].js]:[],[this]):this.boa.iia(r.hb(new _geo.c.f.sa(d[0],f[0])),b,this.Kn[1]?[this.Kn[1].js]:[],[this]))&&2<=r.length)for(d=[],f=[],k=0;k<r.length;k++)l=u.hb(t.hb(r[k])),h(d,f,l.ga(),l.ea());else{u=Math.min(3,d.length-1);for(t=0;t<u;t++)l(d,f,k?m:m-t);Math.abs(p-b.x)>Math.abs(p-b.y)?(h(d,f,w,q,k?m:void 0),h(d,f,w,n,k?m:void 0)):
(h(d,f,p,x,k?m:void 0),h(d,f,v,x,k?m:void 0))}}d=_geo.c.Va.vd.wm.OEa(d,f,!1);this.hl(d.x,d.y);this.Ai()};b.prototype.Nqa=function(a,b,d){if(!a||!a.Za()||_geo.c.$l(a,_geo.c.Va.$.bd.$Z))return null;var f=a.Gu();if(f)for(var h=0;h<f.length;h++){var l=f[h];if(_geo.c.f.sa.Jm(a.Za().hb(l),a.Za().hb(a.kc().Ie(b)))<d)return l}return null};return b}();
_geo.c.Va.$.bd.o_=function(){function b(a){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];_geo.c.V.$.hr.call(this,b);this.yuc=new _geo.c.attributes.za("rgba(100, 100, 100, 1)",3);this.xuc=new _geo.c.attributes.Ha("rgba(100, 100, 100, 1)");this.qQ=0;this.uN=[];this.oI=[new _geo.c.f.sa(0,0),new _geo.c.f.sa(0,0)];this.Kn=[null,null];this.ah(a);this.created=!1}_geo.c.na(b,_geo.c.V.$.hr);_geo.c.Rg(b,_geo.c.Va.$.bd.$Z);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.connectors.PolylineVisual");b.prototype.sD=
function(){return this.t$};b.prototype.qU=function(){return this.O4};b.prototype.ny=function(){return this.s$};b.prototype.RQ=function(){return this.uN};b.prototype.kx=function(){var a=this.ha();return new _geo.c.f.Fc(a.ba(),a.da())};b.prototype.aV=function(a){return this};b.prototype.Qu=function(a){this.Xe=a};b.prototype.Ec=function(a){return this};b.prototype.ce=function(){return this};b.prototype.Gu=function(){for(var a=[],b=this.dg(),e=this.Yg(),d=0;d<b.length;d++)a.push(new _geo.c.f.sa(b[d],
e[d]));return a};b.prototype.jZ=function(a){return this};b.prototype.gJ=function(){return this.LB};b.prototype.dY=function(){return this.xKa};b.prototype.zH=function(a){this.d6=a;return this};b.prototype.By=function(){return this.d6};b.prototype.PCb=function(a){this.ql=a;return this};b.prototype.qm=function(){return this.ql};b.prototype.I7=function(){return this.qQ};b.prototype.kla=function(a){if(!a||0>a)a=0;this.qQ!==a&&(this.ma(),this.qQ=a,this.ma())};b.prototype.ha=function(){var a=_geo.c.V.$.hr.prototype.ha.call(this).clone(),
b=this.ab()?this.ab().ba()/2:.5;a.de(a.ba()<_geo.c.Va.vd.wm.EPSILON?1E-5:b,a.da()<_geo.c.Va.vd.wm.EPSILON?1E-5:b);this.I7()&&a.de(this.qQ,this.qQ);return a};b.prototype.ah=function(a){a&&(this.O4=a.prototypeName,this.Xe=a.geometry,this.t$=a.prototypeId,this.s$=a.category,this.xKa=a.defaultIconSize,this.uN=a.searchKeywords,this.jZ(a.linkPoints),this.LB=a.outline,this.d6=a.url,this.Qr=a.polygon,(a.geometry instanceof _geo.c.V.$.hr||a.geometry instanceof _geo.c.V.$.If)&&this.ka(a.geometry.la()),this.Qb(a.prototypeName),
this.kla(a.tubingWidth),this.Ai());this.tb(_geo.c.V.Node.aa.lP,function(){this.TD()}.bind(this));this.Ae(a&&a.id?a.id:_geo.c.Va.vd.kS.NU())};b.prototype.clone=function(){var a=new b({prototypeName:this.O4,geometry:this.ce(),prototypeId:this.sD(),category:this.ny(),defaultSize:this.kx(),defaultIconSize:this.dY(),searchKeywords:this.uN?this.uN.slice():[],linkPoints:this.Gu()?this.Gu().slice():null,outline:this.gJ()?this.gJ().clone():null,tubingWidth:this.I7(),url:this.By()});return a};b.prototype.va=
function(){for(var a=_geo.c.Va.vd.wm.bW,b=_geo.c.Va.vd.wm.bW,e=_geo.c.Va.vd.wm.Pwa,d=_geo.c.Va.vd.wm.Pwa,f=this.dg(),h=this.Yg(),l=0;l<f.length;l++)a>f[l]&&(a=f[l]),b>h[l]&&(b=h[l]),e<f[l]&&(e=f[l]),d<h[l]&&(d=h[l]);return new _geo.c.f.Rect(a,b,e,d)};b.prototype.Aa=function(a){this.Xe instanceof _geo.c.V.$.If?(this.Xe.ka(this.la()),this.Xe.Aa(a)):_geo.c.V.$.hr.prototype.Aa.call(this,a);this.I7()&&this.DOc(a.Qc(new _geo.c.f.Fa))};b.prototype.Iha=function(a,b,e){if(!e||!a)return!1;var d;return null!=
b?(this.Kn[b]&&(d=this.Kn[b].Yja,this.QX(b),this.Kn[b]=null),a.tb(_geo.c.V.Node.aa.lP,function(){this.TD()}.bind(this)),this.Kn[b]=new _geo.c.Va.$.bd.Eea(a,e,b,this),this.Kn[b].Yja=d,this.TD(!0),!0):!1};b.prototype.Bia=function(){return this.Kn};b.prototype.QX=function(a,b,e){if(null!=a){var d=this.Kn[a];if(!d)return;if(!d.js){this.Kn[a]=null;return}null!=b&&null!=e&&(b=this.Za().Ie(new _geo.c.f.sa(b,e)),e=a===_geo.c.Va.$.bd.cP.TJ?0:this.dg().length-1,this.dg()[e]=b.ga(),this.Yg()[e]=b.ea());this.Kn[a]=
null;null==this.Kn[_geo.c.Va.$.bd.cP.TJ]&&null==this.Kn[_geo.c.Va.$.bd.cP.iA]&&d.js.pb(_geo.c.V.Node.aa.lP,function(){this.TD()}.bind(this))}this.TD()};b.prototype.bQa=function(a){for(var b=[],e=0,d=this.Kn;e<d.length;e++){var f=d[e];f&&f.TCa()===a.zd()&&b.push(f.bB===_geo.c.Va.$.bd.cP.TJ?0:this.dg().length-1)}return b};b.prototype.TD=function(a){void 0===a&&(a=!1);if(!this.ONa){this.ONa=!0;for(var b=!1,e=0,d=this.Kn;e<d.length;e++){var f=d[e];if(f&&f.js&&f.TL){var h=f.js.Za().yb(f.js.ha());if(a||
!h.Ij(f.Yja))b||this.ma(),b=this.getParent().Za().Ie(f.js.Za().hb(f.TL)),this.Rca(f.bB,b,!0,!0),f.Yja=h,b=!0}}b&&(this.Ai(),this.ma(),this.Qa());this.ONa=!1}};b.prototype.Rca=function(a,b,e,d){var f=this.dg().slice(),h=this.Yg().slice();a=(a=a===_geo.c.Va.$.bd.cP.TJ)?0:f.length-1;var l=this.Ju.Ie(b);b=l.x;l=l.y;e?(f[a]=b,h[a]=l):d||_geo.c.Va.vd.wm.QT(f,h,f[a],h[a],a+1);this.hl(f,h);this.Ai()};b.prototype.Nqa=function(a,b,e){if(!a||!a.Za()||_geo.c.$l(a,_geo.c.Va.$.bd.$Z))return null;var d=a.Gu(),f,
h=a.Za();if(d)for(var l=0;l<d.length;l++)if(f=d[l],_geo.c.f.sa.Jm(h.hb(f),h.hb(a.kc().Ie(b)))<e)return f;return null};return b}();_geo.c.Va.$.uf.Mfb={TV:0,hJa:1,BM:2,Qeb:4,Mgb:8,GWa:12};_geo.c.Va.$.uf.lA={cf:0,De:1,Pd:2,Xb:4,Qf:8};_geo.c.Va.$.uf.G9={Jr:0,oE:1};_geo.c.Va.$.uf.CIb=function(){function b(a,b,e){this.nta=a;this.Jl=b;this.Eab=e}return b}();
_geo.c.Va.$.uf.zIa=function(){function b(a,b){this.nta=a;this.bB=b}b.prototype.u_b=function(){return 0};b.prototype.w0b=function(){return this.nta.dg().length-1};b.prototype.F9a=function(){return this.bB===_geo.c.Va.$.bd.cP.TJ};return b}();
_geo.c.Va.$.uf.iC.Kwa=function(){function b(a){a=_geo.c.Ja(a,{x:0,y:0,size:new _geo.c.f.Fc(7,7),painter:_geo.c.V.$.nc.Yy,isindevicespace:!0});_geo.c.controls.bc.No.call(this,a)}_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.handles.LinkHandle");_geo.c.na(b,_geo.c.controls.bc.No);return b}();
_geo.c.Va.$.uf.iC.F9=function(){function b(a,b,e,d,f){a=_geo.c.controls.bc.No.call(this,a,b,e)||this;a.b2=d;a.H2=f;a.Enc=!1;a.Fnc=new _geo.c.attributes.Ha("rgba(255, 0, 0, 1)");a.YU(new _geo.c.attributes.Ha("rgba(255, 197, 113, 1)"));return a}_geo.c.na(b,_geo.c.controls.bc.No);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.handles.LinkSplitHandle");b.prototype.Aa=function(a){a=this.sb()?a.Qc(this.sb()):a;var b=a.$a().hk(this.Jia()),e=this.Zi(),b=new _geo.c.f.Rect(e.ga()-b.ba()/2,e.ea()-b.da()/2,e.ga()+
b.ba()/2,e.ea()+b.da()/2);a.Ea(this.Enc?this.Fnc:this.Bra());a.Ba(this.vrb());a.Kk([b.ua(),b.rd(),b.ya(),b.rd()],[b.td(),b.ta(),b.td(),b.xa()],0,3)};b.prototype.Og=function(){return _geo.c.controls.bc.No.prototype.Og.call(this)};b.prototype.Nm=function(a){_geo.c.controls.bc.No.prototype.Nm.call(this,a);return this};return b}();
_geo.c.Va.$.uf.iC.QKb=function(){function b(a,b,e,d){void 0===e&&(e=new _geo.c.f.Fc(20,20));var f=_geo.c.controls.bc.No.call(this,a+2,b-2,e)||this;f.YU(new _geo.c.attributes.Ha({color:"rgba(100, 100, 100, 0.1)"}));f.N2(new _geo.c.attributes.Ha({color:"rgba(100, 100, 100, 0.0)"}));f.rAa=new _geo.c.Va.$.dfa({prototypeId:"class-cursors",prototypeName:"RotateCursor",category:"cursors",searchKeywords:[],defaultSize:e,geometry:(new _geo.c.V.Ya).Qb("svg_lazy_group"),linkPoints:[],svgData:'<?xml version="1.0" encoding="UTF-8"?>\n<svg  x="0px" y="0px" viewBox="0 0 286.374 286.374" >\n<path style="clip-rule:evenodd;fill:#00aad4;fill-rule:evenodd" d="m 227.925,196.882 58.449,-62.644 -34.15,0 C 247.63,69.222 191.474,17.898 125.288,17.898 56.09,17.898 0,73.989 0,143.187 c 0,69.198 56.09,125.289 125.289,125.289 30.037,0 57.592,-10.592 79.171,-28.215 l -31.934,-31.935 c -13.276,9.643 -29.565,15.403 -47.237,15.403 -44.484,0 -80.543,-36.059 -80.543,-80.543 0,-44.484 36.058,-80.544 80.543,-80.544 41.455,0 75.562,31.327 80.018,71.594 l -35.272,0 z M 89.491,143.187 c 0,19.77 16.027,35.797 35.797,35.797 19.77,0 35.796,-16.027 35.796,-35.797 0,-19.77 -16.026,-35.797 -35.796,-35.797 -19.769,0 -35.797,16.027 -35.797,35.797 z"/>\n</svg>',
url:d});f.rAa.qm().Ec("");f.rAa.qv(function(){f.ma()});return f}_geo.c.na(b,_geo.c.controls.bc.No);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.handles.RotateHandle");b.prototype.Aa=function(a){a=this.sb()?a.Qc(this.sb()):a;var b=a.rq().Fw(this.Jia()),e=this.Zi().clone(),d=new _geo.c.f.Rect(e.ga()-b.ba()/2,e.ea()-b.da()/2,e.ga()+b.ba()/2,e.ea()+b.da()/2);d.Tb(e.ga()-b.ba()/2,e.ea()-b.da()/2,e.ga()+b.ba()/2,e.ea()+b.da()/2);a.Ba(new _geo.c.attributes.za({color:"transparent"}));a.Ea(this.Bra());b=
new _geo.c.f.Rect(d);b.de(-3,-3);a.xn(b.ga(),b.ea(),b.ba(),b.da());b=this.rAa.kc()?this.rAa.kc():new _geo.c.f.Fa;b.tC(d.ga(),d.ea());this.rAa.je(b);this.rAa.Aa(a)};return b}();
_geo.c.Va.$.uf.Hma=function(){function b(){_geo.c.controls.bc.Jq.call(this);this.Lb=[];this.nI=[];this.Ppa=[];this.eI=8;this.hT=[];this.X$=[];this.RNb=10;this.Kh=new _geo.c.selection.Qm;this.rqa=!1;this.rIc=this.pIc=20}var a=_geo.c.Va.$.uf.CIb,g=_geo.c.Va.$.uf.Mfb,e=_geo.c.Va.vd.wm.hab,d=_geo.c.Va.vd.wm.QT;_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.LinksAdapter");_geo.c.na(b,_geo.c.controls.bc.Jq);b.prototype.r6b=function(a,b,d){this.N7();this.po(!1);this.cZ("default")};b.prototype.gxb=function(a,
b,d){this.Rl&&(this.N7(),this.po(!1));this.nGa();this.rqa=!1};b.prototype.nGa=function(){this.Rl=this.Ub().clone();this.Rl.Qb("CLONE-"+this.Ub().getName());this.Rl.Ea(this.Ub().Bb());this.Rl.Ba(this.Ub().ab());this.Rl.Ma(!0);this.Rl.hl(this.Ub().dg(),this.Ub().Yg());this.Rl.je(this.Ub().kc().clone());this.Rl.userTouched=this.Ub().userTouched;this.Ub().getParent().Ia(this.Rl);this.Rl.Ai();this.Ub().Ma(!1)};b.prototype.N7=function(){if(this.Rl){this.Rl.Ma(!1);if(this.Ub()){var a=this.Rl.dg(),b=this.Rl.Yg(),
a=_geo.c.Va.vd.wm.OEa(a,b,!1);this.Ub().hl(a.x,a.y);this.Ub().userTouched=this.Rl.userTouched;this.Ub().Ai()}this.Ub().getParent().removeChild(this.Rl)}this.Rl=null;this.Ub().Ma(!0)};b.prototype.R4a=function(a,b){var d=new _geo.c.f.sa(a,b),d=this.Kh.select(this.Ub().vf(),d.ga(),d.ea(),4).filter(function(a){return a!==this.Ub()&&a!==this.Rl&&!_geo.c.$l(a,_geo.c.Va.$.bd.$Z)&&_geo.c.$l(a,_geo.c.Va.$.R3)}.bind(this));this.PBb(d)};b.prototype.PBb=function(a){a||(a=[]);if(this.Pqc(this.hT,a)||0===a.length&&
0===this.hT.length)return this;this.hT=a;var b=this.hh();this.X$.forEach(function(a){return b.removeChild(a)});this.X$=[];var d,e,g,q;for(a=0;a<this.hT.length;a++)if(d=this.hT[a],q=_geo.c.f.Fa.multiply(d.Za(),b.Za().me()),d.Gu()&&Array.isArray(d.Gu()))for(g=d.Gu(),d=0;d<g.length;d++)e=g[d],q&&(e=q.hb(e)),e=new _geo.c.Va.$.uf.iC.Kwa({x:e.x,y:e.y}),this.X$.push(e),b.Ia(e);return this};b.prototype.hxb=function(a,b,l){if(this.Rl){b=this.Ub().dg().slice();var k=this.Ub().Yg().slice(),m=a.b2?a.b2:this.nI[0],
q=a.H2?a.H2:this.nI[1],p=a,u=this.Rl.Za().me(),m=u.hb(m.Za().hb(m.Zi())),p=u.hb(p.Za().hb(p.Zi())),q=u.hb(q.Za().hb(q.Zi())),q=1E-7>Math.abs(m.ea()-p.ea())&&1E-7>Math.abs(p.ea()-q.ea());if(a.Og().Eab===g.BM){for(var t,r,m=a.b2;m;m=m.b2)if(m.Og().Eab&g.GWa){t=m;break}for(m=a.H2;m;m=m.H2)if(m.Og().Eab&g.GWa){r=m;break}if(!t||!r)return;a=u.hb(t.Za().hb(t.Zi()));u=u.hb(t.Za().hb(r.Zi()));q?(this.cZ("n-resize"),0!==t.Og().Jl&&r.Og().Jl===b.length-1?(e(b,k,t.Og().Jl,r.Og().Jl-t.Og().Jl),d(b,k,u.ga(),l.ea(),
t.Og().Jl),d(b,k,a.ga(),l.ea(),t.Og().Jl)):0===t.Og().Jl&&r.Og().Jl!==b.length-1?(e(b,k,t.Og().Jl+1,r.Og().Jl-t.Og().Jl),d(b,k,u.ga(),l.ea(),t.Og().Jl+1),d(b,k,a.ga(),l.ea(),t.Og().Jl+1)):(e(b,k,t.Og().Jl,r.Og().Jl-t.Og().Jl),t.b2||d(b,k,u.ga(),u.ea(),t.Og().Jl),d(b,k,u.ga(),l.ea(),t.Og().Jl),d(b,k,a.ga(),l.ea(),t.Og().Jl),r.H2||d(b,k,a.ga(),a.ea(),t.Og().Jl))):(this.cZ("e-resize"),0!==t.Og().Jl&&r.Og().Jl===b.length-1?(e(b,k,t.Og().Jl,r.Og().Jl-t.Og().Jl),d(b,k,l.ga(),u.ea(),t.Og().Jl),d(b,k,l.ga(),
a.ea(),t.Og().Jl)):0===t.Og().Jl&&r.Og().Jl!==b.length-1?(e(b,k,t.Og().Jl+1,r.Og().Jl-t.Og().Jl),d(b,k,l.ga(),u.ea(),t.Og().Jl+1),d(b,k,l.ga(),a.ea(),t.Og().Jl+1)):(e(b,k,t.Og().Jl,r.Og().Jl-t.Og().Jl),t.b2||d(b,k,u.ga(),u.ea(),t.Og().Jl),d(b,k,l.ga(),u.ea(),t.Og().Jl),d(b,k,l.ga(),a.ea(),t.Og().Jl),r.H2||d(b,k,a.ga(),a.ea(),t.Og().Jl)));this.Rl.userTouched=!0}l=_geo.c.Va.vd.wm.OEa(b,k,!1);this.Rl.hl(l.x,l.y);this.Rl.Ai()}};b.prototype.iVb=function(){var a;for(a=0;a<this.Lb.length;a++)this.Lb[a].au(null),
this.hh().removeChild(this.Lb[a]);this.PBb(null);this.Lb=[];this.Ppa=[];this.nI=[]};b.prototype.jec=function(a,b,d){if(b&&a){var e=a.Og(),m=e.Jl;if(!(0>m||m>=this.Ub().dg().length)){var q=this.Ub().dg(),p=this.Ub().Yg(),u=0===m?q[m]:(q[m]+q[m-1])/2,t=0===m?p[m]:(p[m]+p[m-1])/2;switch(e.Eab){case g.Qeb:case g.Mgb:a.Ic(d.hb(b.Vf(q[m],p[m]).clone()));a.Ma(!1);break;case g.TV:a.Ic(d.hb(b.Vf((q[m-1]+u)/2,(p[m-1]+t)/2)).clone());a.Ma(!1);break;case g.BM:a.Ic(d.hb(b.Vf(u,t)).clone());break;case g.hJa:a.Ic(d.hb(b.Vf((q[m]+
u)/2,(p[m]+t)/2)).clone());a.Ma(!1);break}}}};b.prototype.vh=function(a){var b=a.ha(),d=a.dg(),e=a.Yg(),g,q,p,u=null!=a.kc()?a.kc():new _geo.c.f.Fa,t=a.Za();if(!t)return this;var r=this.hh().Za().me();for(g=0;g<this.Lb.length;g++)q=this.Lb[g],p=q.Og(),p.nta=a,q instanceof _geo.c.Va.$.uf.iC.F9&&this.uga!==_geo.c.Va.$.uf.G9.Jr?this.jec(q,t,r):q instanceof _geo.c.Va.$.uf.iC.Kwa?(p=p.bB===_geo.c.Va.$.bd.cP.TJ?0:d.length-1,p=t.Vf(d[p],e[p]),q.Ic(r.transform(p))):q instanceof _geo.c.controls.bc.oS&&(q.Hv({from:new _geo.c.f.sa(b.ua(),
b.ta()),to:new _geo.c.f.sa(b.ya(),b.xa())}),q.je(u));return this};b.prototype.lja=function(){for(var a=0;a<this.Lb.length;a++)this.Lb[a].Ma(!1)};b.prototype.po=function(b){void 0===b&&(b=!0);this.iVb();var d=this.Ub();this.uga=d.S7a();var e=d.ha(),k=d.dg(),m=d.Yg();this.Lb.push((new _geo.c.controls.bc.oS(e.ua(),e.ta(),e.ya(),e.xa())).Nm(new _geo.c.Va.$.uf.zIa(d,-1)));b&&this.yq(this.Lb[0]);if(this.uga===_geo.c.Va.$.uf.G9.oE){var q,p,u,t,r,n,v=new _geo.c.f.Fc(this.eI,this.eI);for(b=1;b<k.length;b++)u=
(k[b]+k[b-1])/2,t=(m[b]+m[b-1])/2,e=p?p:(new _geo.c.Va.$.uf.iC.F9(k[b-1],m[b-1],v)).Nm(new a(d,b-1,g.Qeb)),e.Ma(!1),p||(this.Lb.push(e),this.Ppa.push(e)),r=(new _geo.c.Va.$.uf.iC.F9((k[b-1]+u)/2,(m[b-1]+t)/2,v)).Nm(new a(d,b,g.TV)),r.Ma(!1),this.Lb.push(r),this.Ppa.push(r),n=(new _geo.c.Va.$.uf.iC.F9(u,t,v)).Nm(new a(d,b,g.BM)),this.Lb.push(n),this.Ppa.push(n),t=(new _geo.c.Va.$.uf.iC.F9((k[b]+u)/2,(m[b]+t)/2,v)).Nm(new a(d,b,g.hJa)),t.Ma(!1),this.Lb.push(t),this.Ppa.push(t),u=(new _geo.c.Va.$.uf.iC.F9(k[b],
m[b],v)).Nm(new a(d,b,g.Mgb)),u.Ma(!1),this.Lb.push(u),this.Ppa.push(u),p||(e.b2=q,e.H2=r),r.b2=e,r.H2=n,n.b2=r,n.H2=t,t.b2=n,t.H2=u,u.b2=t,p&&(p.H2=r),p=u,q=t}q=k.length-1;p=0;for(e=[0,1];p<e.length;p++)b=e[p],b=(new _geo.c.Va.$.uf.iC.Kwa({x:k[b*q],y:m[b*q],size:new _geo.c.f.Fc(this.eI,this.eI)})).Nm(new _geo.c.Va.$.uf.zIa(d,b)),this.Lb.push(b),this.nI.push(b);for(b=1;b<this.Lb.length;b++)this.hh().Ia(this.Lb[b]),this.Lb[b].au(this);this.yg({main:{linestyle:new _geo.c.attributes.za({color:"rgba(48, 144, 199, 1)",
width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new _geo.c.attributes.Ha("transparent")},corners:{linestyle:new _geo.c.attributes.za({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}})}});this.vh(this.Ub());this.hh().ma();return!0};b.prototype.sk=function(a){_geo.c.controls.bc.Jq.prototype.sk.call(this,a);this.ah();return this};b.prototype.cj=function(a){this.V7()||this.po(!0);this.vh(this.Ub());a||(this.N7(),this.lja(),this.cZ("default"))};b.prototype.ROa=function(a,b,d,e){this.nI[b].setActive(!1);
if(this.hT&&0<this.hT.length){var g,q,p;for(g=0;g<this.hT.length;g++){q=this.hT[g];if(!q.getParent())return;p=q.getParent().Za().me();p=a.Nqa(q,p.Vf(d,e),this.RNb);for(var u=0;u<this.X$.length;u++){var t,r=p&&this.X$[u].Zi().MI(t=q.sb().hb(p));this.X$[u].setActive(r);r&&this.Rl&&this.Rl.Rca(b,t)}if(p&&(this.nI[b].setActive(!0),a.Iha(q,b,p))){a.TD();return}}}a.QX(b)};b.prototype.el=function(a,b){var d=this.wv();if(!d)return this;var e=this.Xc();if(e.ga()===a&&e.ea()===b)return this;this.rqa=!0;this.lja();
var g=this.Rl?this.Rl:this.Ub();g.ma();var q=g.Za().me(),e=q.hb(e),q=q.Vf(a,b).clone();if(d instanceof _geo.c.Va.$.uf.iC.F9&&this.uga!==_geo.c.Va.$.uf.G9.Jr)this.hxb(d,e,q);else if(d instanceof _geo.c.Va.$.uf.iC.Kwa)this.R4a(a,b),d=d.Og(),null!=d&&null!=d.bB&&(g&&g.Rca(d.bB,g.kc().hb(q)),this.ROa(d.nta,d.bB,a,b));else for(this.cZ("move"),this.N7(),d=_geo.c.f.Fa.Mj(q.ga()-e.ga(),q.ea()-e.ea()),g.kc()?g.je(_geo.c.f.Fa.multiply(g.kc(),d)):g.je(d),d=0,q=[0,1];d<q.length;d++)d=q[d],e=this.nI[d].Za().hb(this.nI[d].Zi()),
this.ROa(this.Ub(),this.nI[d].Og().bB,e.ga(),e.ea());this.vh(this.Ub());g.ma();return this};b.prototype.yg=function(a){function b(a){return a instanceof _geo.c.attributes.Ha?_geo.c.Ja({},{fillstyle:a.la()}):_geo.c.Ja({},{fillstyle:a})}function d(a){return a instanceof _geo.c.attributes.za?_geo.c.Ja({},{linestyle:a.la()}):_geo.c.Ja({},{linestyle:a})}var e={};a.hasOwnProperty("main")&&(a.main.hasOwnProperty("linestyle")&&(e=_geo.c.Ja(e,d(a.main.linestyle))),a.main.hasOwnProperty("fillstyle")&&(e=_geo.c.Ja(e,
b(a.main.fillstyle))),this.Lb[0].ka(e));e={};if(a.hasOwnProperty("corners"))for(a.corners.hasOwnProperty("linestyle")&&(e=_geo.c.Ja(e,d(a.corners.linestyle))),a.corners.hasOwnProperty("fillstyle")&&(e=_geo.c.Ja(e,b(a.corners.fillstyle))),a=1;a<this.Lb.length;++a)this.Lb[a].ka(e);return this};b.prototype.Pqc=function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!==b.length)return!1;var d;for(d=0;d<a.length;d++)if(a[d].zd()!==b[d].zd())return!1;return!0};b.prototype.cZ=function(a){this.Xi&&this.Xi.NA()&&
(this.Xi.NA().style.cursor=a);return this};return b}();
_geo.c.Va.$.uf.d4=function(){function b(){_geo.c.Va.$.uf.Hma.call(this);this.nya=!1}_geo.c.na(b,_geo.c.Va.$.uf.Hma);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.PolylineAdapter");b.prototype.YWb=function(){this.Ub().created=!0;this.N7();this.po(!0);this.cZ("default")};b.prototype.X4b=function(){return this.nya};b.prototype.r6b=function(a,b,e){this.Ub().created?(this.N7(),this.po(!1),this.cZ("default")):(this.nGa(),this.rqa=!1)};b.prototype.gxb=function(a,b,e){this.Ub().created?(this.nGa(),this.rqa=
!1):(this.N7(),this.po(!1),this.cZ("default"),this.nya&&(this.Ub().created=!0))};b.prototype.nGa=function(){_geo.c.Va.$.uf.Hma.prototype.nGa.call(this);this.Rl.control=this.Ub().control;this.Rl.created=this.Ub().created};b.prototype.N7=function(a){void 0===a&&(a=!1);if(this.Rl){this.Rl.Ma(!1);if(this.Ub()&&!a){a=this.Rl.dg();var b=this.Rl.Yg();a=_geo.c.Va.vd.wm.OEa(a,b,!0);this.Ub().hl(a.x,a.y);this.Ub().userTouched=this.Rl.userTouched;this.Ub().created=this.Rl.created;this.Ub().Ai()}this.Ub().getParent().removeChild(this.Rl)}this.Rl=
null;this.Ub().Ma(!0)};b.prototype.hxb=function(a,b,e){if(this.Rl&&a){b=this.Ub().dg().slice();var d=this.Ub().Yg().slice(),f=a.Og().Jl,h=0===f?b[b.length-1]:b[f-1],l=0===f?d[d.length-1]:d[f-1],k=f===b.length-1?b[0]:b[f+1],f=f===d.length-1?d[0]:d[f+1],m=e.ga();e=e.ea();var q,p;0!==m-h&&0!==e-l&&(q=Math.sqrt(Math.pow(m-h,2)+Math.pow(e-l,2)),p=Math.abs(m-h)/Math.abs(e-l),p<Math.tan(5*Math.PI/180)?(m=h,e=l+(0<e-l?q:-1*q)):p<Math.tan(48*Math.PI/180)&&p>Math.tan(42*Math.PI/180)?(m=h+(0<m-h?q*Math.sin(45*
Math.PI/180):q*Math.sin(45*Math.PI/180)*-1),e=l+(0<e-l?q*Math.sin(45*Math.PI/180):q*Math.sin(45*Math.PI/180)*-1)):p>Math.tan(87*Math.PI/180)&&(e=l,m=h+(0<m-h?q:-1*q)));0!==m-k&&0!==e-f&&(q=Math.sqrt(Math.pow(m-k,2)+Math.pow(e-f,2)),p=Math.abs(m-k)/Math.abs(e-f),p<Math.tan(5*Math.PI/180)?(m=k,e=f+(0<e-f?q:-1*q)):p<Math.tan(50*Math.PI/180)&&p>Math.tan(40*Math.PI/180)?(m=k+(0<m-k?q*Math.sin(45*Math.PI/180):q*Math.sin(45*Math.PI/180)*-1),e=f+(0<e-f?q*Math.sin(45*Math.PI/180):q*Math.sin(45*Math.PI/180)*
-1)):p>Math.tan(85*Math.PI/180)&&(e=f,m=k+(0<m-k?q:-1*q)));_geo.c.Va.vd.wm.hab(b,d,a.Og().Jl);_geo.c.Va.vd.wm.QT(b,d,m,e,a.Og().Jl);this.Rl.userTouched=!0;a=_geo.c.Va.vd.wm.OEa(b,d,!0);this.Rl.hl(a.x,a.y);this.Rl.Ai()}};b.prototype.jec=function(a,b,e){if(b){var d=a.Og(),d=d.Jl;if(!(0>d||d>=this.Ub().dg().length)){var f=this.Ub().dg(),h=this.Ub().Yg();b=e.hb(b.Vf(f[d],h[d]).clone());a.Ic(b)}}};b.prototype.po=function(a){void 0===a&&(a=!0);this.iVb();var b=this.Ub(),e=b.ha(),d=b.dg(),f=b.Yg();this.nya&&
(b.created=!0);var h;this.Lb.push((new _geo.c.controls.bc.oS(e.ua(),e.ta(),e.ya(),e.xa())).Nm(new _geo.c.Va.$.uf.zIa(b,-1)));var e=new _geo.c.f.Fc(1*this.eI,1*this.eI),l=1;if(this.Ub().ce()instanceof _geo.c.V.$.If&&this.Ub().created)l=0;else for(var k=d.length-1,m=0,q=[0,1];m<q.length;m++)h=q[m],h=(new _geo.c.Va.$.uf.iC.Kwa({x:d[h*k],y:f[h*k],size:new _geo.c.f.Fc(this.eI,this.eI)})).Nm(new _geo.c.Va.$.uf.zIa(b,h)),this.Lb.push(h),this.nI.push(h);for(h=l;h<d.length-l;h++)k=(new _geo.c.Va.$.uf.iC.F9(d[h],
f[h],e)).Nm(new _geo.c.Va.$.uf.CIb(b,h,_geo.c.Va.$.uf.Mfb.GWa)),this.Lb.push(k),this.Ppa.push(k);a&&(this.Ub().created?this.yq(this.Lb[0]):this.yq(this.nI[1]));for(h=1;h<this.Lb.length;h++)this.hh().Ia(this.Lb[h]),this.Lb[h].au(this);this.yg({main:{linestyle:new _geo.c.attributes.za({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new _geo.c.attributes.Ha("transparent")},corners:{linestyle:new _geo.c.attributes.za({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,
y:!0}})}});this.vh(this.Ub());this.hh().ma();return!0};b.prototype.sk=function(a){_geo.c.controls.bc.Jq.prototype.sk.call(this,a);a.created?this.po():(this.nya=!1,this.ah(),this.nGa(),this.rqa=!1);return this};b.prototype.Ub=function(){return _geo.c.controls.bc.Jq.prototype.Ub.call(this)};b.prototype.cj=function(a){this.V7()||this.po(!0);this.vh(this.Ub());a||(this.N7(!0),this.Ub().created=!0,this.lja(),this.cZ("default"))};b.prototype.ROa=function(a,b,e,d){this.nI[b].setActive(!1);if(this.hT&&0<
this.hT.length)for(var f=0,h,l;f<this.hT.length;f++){l=this.hT[f];if(!l.getParent())return;h=a.Nqa(l,l.getParent().Za().Ie(new _geo.c.f.sa(e,d)),this.RNb);for(var k=0;k<this.X$.length;k++){var m,q=h&&this.X$[k].Zi().MI(m=l.sb().hb(h));this.X$[k].setActive(q);q&&this.Rl&&this.Rl.Rca(b,m,!0,this.Rl.created)}if(h){this.nI[b].setActive(!0);a.Iha(l,b,h)&&(a.TD(),this.vh(a));this.nya=!0;return}this.nya=!1}a.QX(b)};b.prototype.el=function(a,b){this.R4a(a,b);var e=this.wv();if(null==e)return this;var d=this.Xc();
if(d.ga()===a&&d.ea()===b)return this;this.lja();var f=this.Rl?this.Rl:this.Ub();f.ma();var h=f.Za().me(),d=h.hb(d),h=h.Vf(a,b).clone();if(e instanceof _geo.c.Va.$.uf.iC.F9)this.hxb(e,d,h);else if(e instanceof _geo.c.Va.$.uf.iC.Kwa)d=e.Og(),null!=d&&null!=d.bB&&f&&(f.Rca(d.bB,f.kc().hb(h),this.rqa,this.Ub().created),this.Ub().created&&this.ROa(d.nta,d.bB,a,b));else{this.cZ("move");this.N7();var e=f.ha(),l=e.clone(),k=h.ga()-d.ga(),d=h.ea()-d.ea();l.zb(l.ga()+k);l.Eb(l.ea()+d);d=_geo.c.f.Fa.Sf(e,l,
!1,!1,!1);h=f.kc()?f.kc():new _geo.c.f.Fa;f.je(_geo.c.f.Fa.multiply(h,d));if(0<this.nI.length)for(d=0,h=[0,1];d<h.length;d++)e=h[d],l=this.nI[e].Za().hb(this.nI[e].Zi()),this.ROa(this.Ub(),this.nI[e].Og().bB,l.ga(),l.ea())}this.rqa=!0;this.vh(this.Ub());f.ma();return this};return b}();
_geo.c.Va.$.uf.v4=function(){function b(){var a=_geo.c.Va.$.zl.call(this,{})||this;a.Vh=[];return a}_geo.c.na(b,_geo.c.Va.$.zl);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.VirtualGroupVisual");b.prototype.ACb=function(a){var b;if(this.Vh)for(b=0;b<this.Vh.length;b++)this.Vh[b].pb(_geo.c.V.Node.aa.jK,this.Zsa.bind(this)),this.Vh[b].pb(_geo.c.V.Node.aa.pM,this.Zsa.bind(this));this.Vh=a?a:[];for(b=0;b<this.Vh.length;b++)this.Vh[b].tb(_geo.c.V.Node.aa.jK,this.Zsa.bind(this)),this.Vh[b].tb(_geo.c.V.Node.aa.pM,
this.Zsa.bind(this));this.Zsa();return this};b.prototype.Zq=function(){return this.Vh};b.prototype.Zsa=function(){this.Vb=null;this.Pa(_geo.c.V.Node.aa.pM,this,this.ha());return this};b.prototype.ha=function(){if(!this.Vb){if(!this.Vh||!this.Vh.length)return new _geo.c.f.Rect;for(var a=void 0,b=0;b<this.Vh.length;b++)a=(a=this.Vh[b].kc?this.Vh[b].kc():null)?a.yb(this.Vh[b].ha()):this.Vh[b].ha(),this.Vb?this.Vb.zi(a):this.Vb=a.clone()}return this.Vb};b.prototype.kc=function(){return null};b.prototype.Za=
function(){return this.q2a&&this.q2a.Za&&this.q2a.Za()?this.q2a.Za():new _geo.c.f.Fa};b.prototype.je=function(a){a||(a=new _geo.c.f.Fa);this.ma();for(var b=0;b<this.Vh.length;b++)this.Vh[b].je(_geo.c.f.Fa.multiply(a,this.Vh[b].kc()?this.Vh[b].kc():new _geo.c.f.Fa));this.Zsa();this.ma()};b.prototype.YFc=function(a){this.q2a=a};return b}();
_geo.c.Va.$.uf.Lxa=function(){function b(){_geo.c.controls.bc.Jq.call(this);this.Lb=[];this.UNa=new _geo.c.Va.$.uf.v4;this.Kh=new _geo.c.selection.Qm;this.UNa.tb(_geo.c.V.Node.aa.pM,this.bYb.bind(this));this.UNa.tb(_geo.c.V.Node.aa.jK,this.bYb.bind(this));_geo.c.controls.bc.Jq.prototype.sk.call(this,this.UNa)}_geo.c.na(b,_geo.c.controls.bc.Jq);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.VisualPluginAdapter");b.prototype.sk=function(a){a=_geo.c.Va.vd.wm.s6a([a]);this.UNa.ACb(a);this.UNa.YFc(0<a.length?
a[0].getParent():this.hh());this.V7()?this.vh():this.ah();this.yq(this.Lb[0]);return this};b.prototype.bYb=function(){this.vh()};b.prototype.Ub=function(){return _geo.c.controls.bc.Jq.prototype.Ub.call(this)};b.prototype.SQ=function(){return this.Ub().ha()};b.prototype.cj=function(a){this.vh();for(var b=0;b<this.Lb.length;b++)this.Lb[b].Ma(a)};b.prototype.po=function(){this.Lb=[];var a=this.SQ();this.Lb.push((new _geo.c.controls.bc.k9(a)).Nm({x:1,y:1,width:0,height:0}).YU(new _geo.c.attributes.Ha("transparent")));
this.Lb.push(new _geo.c.Va.$.uf.iC.QKb(a.ya(),a.ta()));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:1,y:1,width:-1,height:-1}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:0,y:1,width:1,height:-1}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:0,y:0,width:1,height:1}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:1,y:0,width:-1,height:1}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:1,y:0,width:-1,height:0}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:0,
y:0,width:1,height:0}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:0,y:1,width:0,height:-1}));this.Lb.push((new _geo.c.controls.bc.No(0,0)).Nm({x:0,y:0,width:0,height:1}));for(a=0;a<this.Lb.length;a++)this.hh().Ia(this.Lb[a]),this.Lb[a].au(this);this.vh();this.yg({main:{linestyle:new _geo.c.attributes.za({color:"rgba(48, 144, 199, 1)",width:1,pixelsnapmode:{x:!0,y:!0}}),fillstyle:new _geo.c.attributes.Ha("transparent")},corners:{linestyle:new _geo.c.attributes.za({color:"rgba(48, 144, 199, 1)",
width:1,pixelsnapmode:{x:!0,y:!0}})}});return!0};b.prototype.prc=function(a,b,e,d,f,h){var l=0,k=(a-e)*(f-e)+(b-d)*(h-d);a=(a-e)*(h-d)-(b-d)*(f-e);if(0!==k||0!==a)l=Math.atan2(a,k);return l};b.prototype.R4a=function(a,b){var e=6,d=this.Ub();if(d){var f=d.Za().clone();d.kc()&&f.Gz(d.kc());var f=f.yb(d.ha()),h=f.clone();h.de(e,e);h=this.Kh.select(d.vf(),h,e,!0).filter(function(a){return a!==d&&a instanceof _geo.c.Va.$.zl}).map(function(a){return d.Za().yb(a.kc().yb(a.ha()))});return this.NGc(new _geo.c.f.sa(a,
b),f,h,e)}return new _geo.c.f.sa(a,b)};b.prototype.NGc=function(a,b,e,d){void 0===d&&(d=8);if(!e||0===e.length)return a;var f=b.xa(),h=b.ta(),l=b.ua();b=b.ya();for(var k=0,m=0,q=0;q<e.length;q++){var p=e[q];Math.abs(p.xa()-f)<d?m=p.xa()-f:Math.abs(p.xa()-h)<d?m=p.xa()-h:Math.abs(p.ta()-f)<d?m=p.ta()-f:Math.abs(p.ta()-h)<d&&(m=p.ta()-h);Math.abs(p.ua()-l)<d?k=p.ua()-l:Math.abs(p.ua()-b)<d?k=p.ua()-b:Math.abs(p.ya()-l)<d?k=p.ya()-l:Math.abs(p.ya()-b)<d&&(k=p.ya()-b)}return new _geo.c.f.sa(a.ga()+k,
a.ea()+m)};b.prototype.el=function(a,b){var e=this.R4a(a,b);a=e.ga();b=e.ea();var d=this.wv();if(!d)return this;e=this.Ub();if(d instanceof _geo.c.Va.$.uf.iC.QKb){var f=this.Xc(),h=d=e.ha(),l=e.Za(),k=this.hh().Za().me();e instanceof _geo.c.Va.$.uf.v4&&(h=e.Zq()[0].ha(),l=e.Zq()[0].Za());if(a===this.Xc().ga()&&b===this.Xc().ea())return this;l=_geo.c.f.Fa.multiply(k,l);f=k.hb(f);k=k.hb(new _geo.c.f.sa(a,b));h=l.hb(h.Xh());h=this.prc(f.ga(),f.ea(),h.ga(),h.ea(),k.ga(),k.ea());d=_geo.c.f.Fa.hp(h,d.rd(),
d.td());e.kc()?e.je(_geo.c.f.Fa.multiply(e.kc(),d)):e.je(d);e.ma();this.setPosition(a,b);return this}if(!d.Og())return this;this.v$a(a,b);this.vh();this.setPosition(a,b);e.ma();return this};b.prototype.v$a=function(a,b){var e=this.Xc();if(e&&(e.ga()!==a||e.ea()!==b)){for(var d=this.Ub(),f=d instanceof _geo.c.Va.$.uf.v4?d.Zq():[d],h=0;h<f.length;h++){var d=f[h],l=d.ha(),k=l.clone(),m=d.getParent().Za().me(),q=new _geo.c.f.sa(e.ga(),e.ea()),p=new _geo.c.f.sa(a,b);m.hb(q,q);m.hb(p,p);var m=d.kc()?d.kc():
new _geo.c.f.Fa,u=m.me(),q=u.hb(q),p=u.hb(p),u=p.ga()-q.ga(),q=p.ea()-q.ea(),p=this.wv().Og();k.zb(l.x+p.x*u);k.Eb(l.y+p.y*q);k.rb(l.width+p.width*u);k.Hb(l.height+p.height*q);d.je(_geo.c.f.Fa.multiply(m,_geo.c.f.Fa.Sf(l,k,!1,!1,!1)))}d instanceof _geo.c.Va.$.uf.v4&&d.Zsa()}};b.prototype.yg=function(a){function b(a){return a instanceof _geo.c.attributes.Ha?_geo.c.Ja({},{fillstyle:a.la()}):_geo.c.Ja({},{fillstyle:a})}function e(a){return a instanceof _geo.c.attributes.za?_geo.c.Ja({},{linestyle:a.la()}):
_geo.c.Ja({},{linestyle:a})}var d={};a.hasOwnProperty("main")&&(a.main.hasOwnProperty("linestyle")&&(d=_geo.c.Ja(d,e(a.main.linestyle))),a.main.hasOwnProperty("fillstyle")&&(d=_geo.c.Ja(d,b(a.main.fillstyle))),this.Lb[0].ka(d));d={};if(a.hasOwnProperty("corners"))for(a.corners.hasOwnProperty("linestyle")&&(d=_geo.c.Ja(d,e(a.corners.linestyle))),a.corners.hasOwnProperty("fillstyle")&&(d=_geo.c.Ja(d,b(a.corners.fillstyle))),a=2;a<this.Lb.length;++a)this.Lb[a].ka(d);return this};b.prototype.vh=function(){if(this.V7()){var a=
this.SQ();if(a){var b=this.Ub().Za(),e=this.hh().Za().me(),d=b.yb(a),a=d.pi();a.lb(a.ga()-this.Lb[1].Jia().ba()/2-3,a.ea()-this.Lb[1].Jia().da()/2-3);d=e.yb(d);this.Lb[0].Tb(d);this.Lb[1].Ic(e.hb(a));this.Lb[2].Ic(new _geo.c.f.sa(d.ua(),d.ta()));this.Lb[3].Ic(new _geo.c.f.sa(d.ya(),d.ta()));this.Lb[4].Ic(new _geo.c.f.sa(d.ya(),d.xa()));this.Lb[5].Ic(new _geo.c.f.sa(d.ua(),d.xa()));this.Lb[6].Ic(new _geo.c.f.sa(d.ua(),d.td()));this.Lb[7].Ic(new _geo.c.f.sa(d.ya(),d.td()));this.Lb[8].Ic(new _geo.c.f.sa(d.rd(),
d.ta()));this.Lb[9].Ic(new _geo.c.f.sa(d.rd(),d.xa()));var f=this.Ub();if(f instanceof _geo.c.Va.$.uf.v4&&0<f.Zq().length){a=1===f.Zq().length?f.Zq()[0].ha():f.ha();d=[a.pi(),a.Zr(),a.Do(),a.Xq(),a.Nia(),a.hca(),a.pca(),a.Hra()];b=1===f.Zq().length?f.Zq()[0].Za():f.Za();e=_geo.c.f.Fa.multiply(e,b);this.Lb[0].Tb(a);this.Lb[0].je(e);var f=b.Vf(0,0).clone(),h=b.Vf(1,0).clone(),l=b.Vf(0,1).clone(),b=_geo.c.f.sa.Jm(f,h),f=_geo.c.f.sa.Jm(f,l),a=a.clone();b>_geo.c.Va.vd.wm.EPSILON&&f>_geo.c.Va.vd.wm.EPSILON&&
(b=1/b*(this.Lb[1].Jia().ba()/2+2),f=1/f*(this.Lb[1].Jia().da()/2+2),a.de(b,f));this.Lb[1].Ic(e.hb(a.pi()));for(a=2;a<Math.min(this.Lb.length,d.length+2);a++)this.Lb[a].Ic(e.hb(d[a-2]))}}}};return b}();
_geo.c.Va.$.uf.Deb=function(){function b(a,b){var e={slots:{pointerdown:this.tg.bind(this),pointermove:this.oe.bind(this),pointerup:this.wf.bind(this),dblclick:this.Ly.bind(this)},name:"geotoolkit.flowcharts.shapes.edit.DiagramTool",layer:b};_geo.c.controls.ia.oc.call(this,e);this.cdc=!0;this.Qta=new _geo.c.Va.vd.Lwa;this.GDb=0;this.KDb=function(){this.hG&&this.JDb(this.hG)}.bind(this);this.Zc=a;this.Kh=new _geo.c.selection.Qm}_geo.c.na(b,_geo.c.controls.ia.oc);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.edit.DiagramTool");
b.prototype.hw=function(a){this.Xi=a;this.qzc(a);return this};b.prototype.A2b=function(){return this.tI};b.prototype.qzc=function(a){this.tI||(this.tI=(new _geo.c.controls.bc.i4(null,this.hh())).register(_geo.c.Va.$.zl.getClassName(),new _geo.c.Va.$.uf.Lxa).register(_geo.c.Va.$.dfa.getClassName(),new _geo.c.Va.$.uf.Lxa).register(_geo.c.Va.$.bd.aW.getClassName(),new _geo.c.Va.$.uf.Hma).register(_geo.c.Va.$.bd.o_.getClassName(),new _geo.c.Va.$.uf.d4).register(_geo.c.Va.$.uf.v4.getClassName(),this.Xoc=
new _geo.c.Va.$.uf.Lxa).register(_geo.c.dc.X9.getClassName(),new _geo.c.Va.$.uf.Lxa));return this.tI};b.prototype.wWb=function(){this.tI.AO(null);return this};b.prototype.Ra=function(){this.Rj&&this.Rj.removeEventListener("keypress",this.IKa);_geo.c.controls.ia.oc.prototype.Ra.call(this)};b.prototype.tg=function(a){var b,e=this.Fe(this.Zc,a),d=this.Zc.Za().hb(e),f=this.Kh.select(this.Xi.vf(),d.ga(),d.ea(),3).filter(function(a){return a instanceof _geo.c.V.Node});if(this.Me instanceof _geo.c.Va.$.uf.d4&&
!this.Me.Ub().created&&(this.Me.gxb(a,d,e),!this.Me.X4b()))return;if(f&&0<f.length){for(b=f.length-1;0<=b;b--)if(f[b]instanceof _geo.c.Va.$.bd.aW||f[b]instanceof _geo.c.Va.$.bd.o_){var h=this.tI.Ara();(h instanceof _geo.c.Va.$.uf.Hma||h instanceof _geo.c.Va.$.uf.d4)&&h.$e()&&h.Ub()===f[b]&&h.gxb(a,d,e)}for(b=f.length-1;1<=b;b--)if(e=f[b],e instanceof _geo.c.controls.bc.GZ){if(e instanceof _geo.c.controls.bc.k9&&(h=this.JPa())&&1===h.length&&h!==f[b])continue;if(e.ix()){this.Me=e.ix().yq(e).setPosition(d.ga(),
d.ea());this.tI.AO(this.Me);this.$e()||this.start();a.stopPropagation(!0);return}}}(a=this.zcb(f,d,a))&&a.length?(this.vlb!==a&&this.o7().FGa(a),this.vlb=a):this.WT()};b.prototype.wf=function(a){if(!this.$e()||!this.Me)if(!(this.Me instanceof _geo.c.Va.$.uf.d4)||this.Me.Ub().created&&!this.Me.X4b())return;var b=this.tI.Ara();if(b instanceof _geo.c.Va.$.uf.Hma||b instanceof _geo.c.Va.$.uf.d4){var e=this.Fe(this.Zc,a),d=this.Zc.Za().hb(e);b.r6b(a,d,e);b.PBb([])}a=this.Me.Ub();this.Me instanceof _geo.c.Va.$.uf.d4&&
!this.Me.Ub().created||(a instanceof _geo.c.Va.$.bd.aW&&a.TD(),this.Me&&this.Me.yq(null),this.Me=null,this.stop())};b.prototype.Ly=function(a){a=this.Fe(this.Zc,a);a=this.Zc.Za().hb(a);a=this.Kh.select(this.Xi.vf(),a.ga(),a.ea(),4).filter(function(a){return _geo.c.$l(a,_geo.c.Va.$.R3)});a=0<a.length?a[a.length-1]:null;_geo.c.$l(a,_geo.c.Va.$.zl)&&this.$Gc(a);this.Me instanceof _geo.c.Va.$.uf.d4&&(this.Me.YWb(),this.WT())};b.prototype.oe=function(a){if(this.Me){a=this.Fe(this.Zc,a);a=this.Zc.Za().hb(a);
var b=this.tI.Ara();b&&b.move(a.ga(),a.ea())}};b.prototype.WT=function(){this.vlb=null;this.o7().FGa([]);this.wWb()};b.prototype.Dcb=function(){return this.Me instanceof _geo.c.Va.$.uf.d4&&!this.Me.Ub().created?(this.Me.YWb(),this.WT(),!0):!1};b.prototype.zcb=function(a,b,e){if(a&&0<a.length)for(var d=a.length-1;0<=d;d--)if(!a[d].getParent()||"ShapesContainer"===a[d].getParent().zd()){var f=this.tI.ix(a[d]);if(f)return a[d]instanceof _geo.c.Va.$.bd.o_&&-1!==a[d].getName().indexOf("CLONE")||f.sk(a[d]).setPosition(b.ga(),
b.ea()),this.tI.AO(null),this.tI.AO(f),this.Me=f,this.$e()||this.start(),e&&e.stopPropagation(!0),[a[d]]}return[]};b.prototype.Occ=function(){this.stop();this.Me=null;this.wWb()};b.prototype.JPa=function(){var a=[];if(!this.tI.Ara())return a;var b;b=this.tI.Ara().Ub();if(b instanceof _geo.c.Va.$.uf.v4){var e=b.Zq();for(b=0;b<e.length;b++)a.push(e[b])}else 0>a.indexOf(b)&&a.push(b);return a};b.prototype.uda=function(a){if(this.Me instanceof _geo.c.Va.$.uf.d4&&!this.Me.Ub().created)return this;this.tI.AO(null);
var b;if(1<a.length){if(b=this.Xoc)b.sk(a),this.tI.AO(b)}else if(1===a.length)for(var e=0;e<a.length;e++){b=this.tI.ix(a[e]);if(!b)return this;b.sk(a[e]);this.tI.AO(b)}this.o7().FGa(a);return this};b.prototype.Sub=function(){return this.cdc};b.prototype.Wbc=function(a){this.cdc=a;return this};b.prototype.$Gc=function(a){this.Sub()&&(this.hG&&(this.hG.pb(_geo.c.V.Node.aa.lP,this.KDb),this.hG.qm&&this.hG.qm()&&(this.hG.qm().Ma(!0),this.hG.ma())),this.YGc(),this.hG=a)&&(a.tb(_geo.c.V.Node.aa.lP,this.KDb),
a.qm&&a.qm()&&(a.qm().Ma(!1),a.ma()),this.JDb(a,!0),this.Rj.focus())};b.prototype.YGc=function(){this.Qj||(this.Qj=_geo.c.window.document.createElement("div"),this.Qj.style.position="absolute",this.Qj.style.display="none",this.Qj.style.border="0px solid transparent !important",this.Qj.style.pointerEvents="none",this.Qj.style.overflow="hidden",_geo.c.window.document.body.appendChild(this.Qj),this.Rj=_geo.c.window.document.createElement("div"),this.Rj.style.overflow="hidden",this.Rj.style.position=
"absolute",this.Rj.style.border=this.GDb+"px solid black",this.Rj.style.pointerEvents="all",this.Rj.style.display="flex",this.Rj.style.alignContent="center",this.Rj.style.alignItems="center",this.Rj.contentEditable="true",this.Qj.appendChild(this.Rj),this.IKa=function(a){if("Enter"===a.key||13===a.keyCode)a.shiftKey||this.hdc()}.bind(this),this.Rj.addEventListener("keypress",this.IKa),this.ioa=function(a){"Escape"===a.key||27===a.keyCode?this.XGc():(this.JDb(this.hG,!1),a.stopPropagation())}.bind(this),
this.Rj.addEventListener("keydown",this.ioa),this.Rj.addEventListener("blur",function(){return this.hdc()}.bind(this)))};b.prototype.JDb=function(a,b){var e=this.Xi?this.Xi.NA():null;if(!e)return this;var d=this.eU(this.Xi.NA()),e=new _geo.c.f.Rect({x:d.x,y:d.y,width:e.clientWidth,height:e.clientHeight});if(!a||!a.ha())return this.Qj.style.display="none",this;d=this.ZGc(a,!0);b&&(this.Rj.innerText=a.qm()?a.qm().ne()||"":"",this.Rj.style.wordBreak="break-all",this.Rj.style.font=a.qm().ec().kt(),this.Rj.style.textAlign=
a.qm().ec().wr(),this.Rj.style.justifyContent=a.qm().ec().wr()===_geo.c.attributes.kb.DV.Pd?"flex-end":a.qm().ec().wr(),this.Rj.style.color="red",this.Rj.style.lineHeight=a.qm().ec().UG()+"",this.Rj.style.baselineShift=a.qm().ec().xv());this.Qj.style.display="block";this.Qj.style.left=e.ga()+"px";this.Qj.style.top=e.ea()+"px";this.Qj.style.width=e.ba()+"px";this.Qj.style.height=e.da()+"px";this.Rj.style.left=d.left+"px";this.Rj.style.top=d.top+"px";this.Rj.style.width=d.width+2*this.GDb+"px";this.Rj.style.height=
d.height+2*this.GDb+"px";this.Rj.style.transformOrigin="center";this.Rj.style.transform="rotate("+d.angle+"rad)";return this};b.prototype.ZGc=function(a,b){for(var e=a.ha(),d=[e.pi(),e.Zr(),e.Do(),e.Xq(),e.Xh()],f=a.Za().clone(),e=[],h=0;h<d.length;h++)e.push(f.hb(d[h]));d=_geo.c.Va.$.zl.Pvc(_geo.c.Va.$.zl.Rxc(e[0],e[1]),!1);f=_geo.c.f.sa.Jm(e[0],e[1]);h=_geo.c.f.sa.Jm(e[0],e[3]);return{angle:d,left:e[4].ga()-f/2,top:e[4].ea()-h/2,width:f,height:h}};b.prototype.hdc=function(){var a=this.Rj.innerText,
a={value:a};this.fireEvent("ValueChanged",a);this.hG instanceof _geo.c.Va.$.zl&&(this.hG.qm().Ec(this.Rj.innerText),this.hG.ma());this.gdc();return this};b.prototype.XGc=function(){if("none"===this.Rj.style.display)return this;this.gdc();return this};b.prototype.gdc=function(){this.Qj.style.display="none";this.hG&&(this.hG.pb(_geo.c.V.Node.aa.lP,this.KDb),this.hG.qm()&&(this.hG.qm().Ma(!0),this.hG.ma()));this.hG=null};b.prototype.o7=function(){this.Qta||(this.Qta=new _geo.c.Va.vd.Lwa);return this.Qta};
return b}();
_geo.c.Va.$.OIa=function(){function b(a,b){void 0===b&&(b=10);this.Cy=a;this.erc=b;this.dI=[];this.W0=this.I2=0;this.b9=[]}b.prototype.iia=function(a,g){var e=new _geo.c.Va.vd.nKb,d=~~(a.ga()/this.Cy),f=~~(a.ea()/this.Cy),h=~~(g.ga()/this.Cy),l=~~(g.ea()/this.Cy);0>d&&(d=0);d>=this.W0&&(d=this.W0-1);0>f&&(f=0);f>=this.I2&&(f=this.I2-1);e.enqueue({Px:f,Fx:d});this.b9[f][d].uS=0;this.b9[f][d].twa=-100;this.b9[f][d].uS=-100;var k={state:!1};b.Zqc(e,this.dI,h,l,this.b9,0,k);var m;if(k.state)for(m=[],
e=l,k=h;;){m.push({Px:e,Fx:k});if(e===f&&k===d)break;k=this.b9[e][k];e=k.twa;k=k.ZHa}b.qGb&&this.kDc(this.b9,d,f,h,l,this.path);return m};b.prototype.Z8=function(a,b,e){this.Ioc=b?b:[];this.Gnc=e?e:[];b=a.ha();this.I2=Math.max(1,Math.ceil(b.da()/this.Cy));this.W0=Math.max(1,Math.ceil(b.ba()/this.Cy));if(null===this.dI||this.I2!==this.dI.length||null===this.dI[0]||this.W0!==this.dI[0].length)for(this.dI=[],this.b9=[],b=0;b<this.I2;b++)for(this.dI[b]=[],this.b9[b]=[],e=0;e<this.W0;e++)this.b9[b][e]=
new _geo.c.Va.$.Mlc,this.dI[b][e]=1;else for(b=0;b<this.I2;b++)for(e=0;e<this.W0;e++)this.b9[b][e].reset(),this.dI[b][e]=1;for(b=0;b<a.cd();b++)this.H7b(a.Dc(b),this.erc)};b.prototype.kDc=function(a,g,e,d,f,h){for(g=0;g<a.length;g++)for(e=0;e<a[0].length;e++)this.dI[g][e]!==b.IJa&&(this.dI[g][e]+=a[g][e].uS)};b.prototype.H7b=function(a,b,e){if(_geo.c.$l(a,_geo.c.Va.$.R3)&&-1===this.Gnc.indexOf(a)&&"class-text"!==a.sD()){var d=a.kc&&a.kc()?a.kc().clone():new _geo.c.f.Fa;e&&d.tO(e);_geo.c.$l(a,_geo.c.Va.$.R3)&&
this.lDc(a,d,0<=this.Ioc.indexOf(a)?5*b:b);if(a instanceof _geo.c.V.Ya)for(e=0;e<a.cd();e++)this.H7b(a.Dc(e),b,d);else _geo.c.$l(a instanceof _geo.c.Va.$.bd.$Z)}};b.prototype.lDc=function(a,b,e){a=a.ha().clone();var d=b.yb(a).de(this.Cy,this.Cy);b=Math.max(0,Math.min(Math.floor(d.ua()/this.Cy),this.W0));var f=Math.max(0,Math.min(Math.floor(d.ta()/this.Cy),this.I2));a=Math.max(0,Math.min(Math.ceil(d.ya()/this.Cy),this.W0));for(d=Math.max(0,Math.min(Math.ceil(d.xa()/this.Cy),this.I2));f<this.I2&&f<
d;f++)for(var h=b;h<this.W0&&h<a;h++)this.dI[f][h]+=e};b.prototype.mOc=function(a,b,e){};b.prototype.qyb=function(a,b,e){b=~~(b/this.Cy);a=~~(a/this.Cy);0>a||a>=this.W0||0>b||b>=this.I2||(this.dI[b][a]+=e)};b.prototype.kOc=function(a,b,e,d,f){a=~~a;b=~~b;e=~~e;d=~~d;var h=d-b,l=e-a,k,m;0>h?(h=-h,m=-1):m=1;0>l?(l=-l,k=-1):k=1;h<<=1;l<<=1;this.qyb(a,b,f);var q;if(l>h)for(q=h-(l>>1);a!==e;)0<=q&&(b+=m,q-=l),this.qyb(a,b,f),a+=k,q+=h;else for(q=l-(h>>1);b!==d;)0<=q&&(a+=k,q-=h),this.qyb(a,b,f),b+=m,q+=
l};b.Zqc=function(a,g,e,d,f,h,l){for(;0<a.aC();){h=a.Ypb();var k=h.Px,m=h.Fx;h=-100!==f[k][m].uS?f[k][m].uS:0;k===d&&m===e&&(l.state=!0);0<k&&g[k-1][m]!==b.IJa&&h+g[k-1][m]<f[k-1][m].uS&&(f[k-1][m].uS=h+g[k-1][m],f[k-1][m].ZHa=m,f[k-1][m].twa=k,a.enqueue({Px:k-1,Fx:m}));k+1<g.length&&g[k+1][m]!==b.IJa&&h+g[k+1][m]<f[k+1][m].uS&&(f[k+1][m].uS=h+g[k+1][m],f[k+1][m].ZHa=m,f[k+1][m].twa=k,a.enqueue({Px:k+1,Fx:m}));0<m&&g[k][m-1]!==b.IJa&&h+g[k][m-1]<f[k][m-1].uS&&(f[k][m-1].uS=h+g[k][m-1],f[k][m-1].ZHa=
m,f[k][m-1].twa=k,a.enqueue({Px:k,Fx:m-1}));m+1<g[0].length&&g[k][m+1]!==b.IJa&&h+g[k][m+1]<f[k][m+1].uS&&(f[k][m+1].uS=h+g[k][m+1],f[k][m+1].ZHa=m,f[k][m+1].twa=k,a.enqueue({Px:k,Fx:m+1}))}};return b}();_geo.c.Va.$.OIa.qGb=0;_geo.c.Va.$.OIa.IJa=-1;_geo.c.Va.$.Mlc=function(){function b(){this.reset()}b.prototype.reset=function(){this.twa=this.ZHa=0;this.uS=_geo.c.Va.vd.wm.bW};return b}();
_geo.c.Va.$.FJb=function(){function b(a,b,e){void 0===e&&(e=!0);var d=_geo.c.V.$.Th.call(this,a?a.va():new _geo.c.V.$.Th)||this;d.DGc=e;d.bqc=new _geo.c.attributes.Ha({color:"rgba(0, 0, 0, 0.8)"});d.ka({linestyle:new _geo.c.attributes.za({color:"rgba(150, 150, 150, 0.4)",width:1,pixelsnapmode:!0}),fillstyle:new _geo.c.attributes.Ha({color:"rgba(0, 200, 0, 0.05)"})});d.wG=b;d.AUa(a);return d}_geo.c.na(b,_geo.c.V.$.Th);_geo.c.ja(b,_geo.c.Va.$.FJb);b.prototype.AUa=function(a){if(a!==this.II){this.II&&
(this.II.pb(_geo.c.V.Node.aa.gr,function(){this.Ga(this.II.va());this.Z8(this.II)}.bind(this)),this.II.pb(_geo.c.V.Node.aa.ku,function(){this.Z8(this.II)}.bind(this)),this.II.pb(_geo.c.V.Node.aa.Ov,function(){this.Z8(this.II)}.bind(this)),this.II.pb(_geo.c.V.Node.aa.lP,function(){this.Z8(this.II)}.bind(this)));if(this.II=a)a.tb(_geo.c.V.Node.aa.gr,function(){this.Ga(this.II.va())}.bind(this)),a.tb(_geo.c.V.Node.aa.ku,function(){this.Z8(this.II)}.bind(this)),a.tb(_geo.c.V.Node.aa.Ov,function(){this.Z8(this.II)}.bind(this)),
a.tb(_geo.c.V.Node.aa.lP,function(){this.Z8(this.II)}.bind(this));this.Ga(this.II.va());this.Z8(this.II)}};b.prototype.Z8=function(a){};b.prototype.lOc=function(a,b){var e=a.dg().slice(),d=a.Yg().slice();b.EGa(e,d,e.length);this.path=this.wG.iia(new _geo.c.f.sa(e[0],d[0]),new _geo.c.f.sa(e[e.length-1],d[d.length-1]))};b.prototype.EEc=function(a){a=this.sb()?a.Qc(this.sb()):a;a.AI();var b=this.ha();a.Ba(this.ab());for(var e=b.ua();e<b.ya();e+=this.wG.Cy)a.Id(e,b.ta(),e,b.xa());for(e=b.ta();e<b.xa();e+=
this.wG.Cy)a.Id(b.ua(),e,b.ya(),e);a.LI()};b.prototype.gzb=function(a){if(!a.Sd()){a=this.sb()?a.Qc(this.sb()):a;a.AI();a.Ea(this.Bb());a.Ba(null);var b=this.ha(),e=_geo.c.Va.vd.wm.Pwa,d=this.wG.dI;d.forEach(function(a){a.forEach(function(a){e=Math.max(e,a)})});for(var f=255/e,h=0;h<this.wG.I2;h++)for(var l=0;l<this.wG.W0;l++)if(d[h][l]){if(0>d[h][l])a.Ea(this.bqc);else{var k=Math.min(d[h][l]*f,255),m=255-k,q=255-k;a.Ea(new _geo.c.attributes.Ha({color:new _geo.c.f.vb(k,q,m,1)}))}a.xc(b.ua()+l*this.wG.Cy,
b.ta()+h*this.wG.Cy,this.wG.Cy,this.wG.Cy)}a.LI()}};b.prototype.LEc=function(a){if(this.path){a=this.sb()?a.Qc(this.sb()):a;a.AI();a.Ea(new _geo.c.attributes.Ha({color:"rgba(0, 200, 0, 1)"}));a.Ba(new _geo.c.attributes.za({color:"transparent"}));for(var b=this.ha(),e=0,d=this.path;e<d.length;e++){var f=d[e];a.xc(b.ua()+f.Fx*this.wG.Cy,b.ta()+f.Px*this.wG.Cy,this.wG.Cy,this.wG.Cy)}a.LI()}};b.prototype.Aa=function(a){a.Sd()||(_geo.c.V.$.Th.prototype.Aa.call(this,a),this.gzb(a),this.LEc(a),this.DGc&&
this.EEc(a))};return b}();
_geo.c.Va.xd.hg.mwa=function(){function b(a){void 0===a&&(a=!0);this.tla=!0;this.tla=a}_geo.c.ja(b,"geotoolkit.flowcharts.persistence.visuals.DiagramVisualSerializer");_geo.c.na(b,_geo.c.xd.Wwa);b.prototype.gSa=function(a){return a={prototypeName:a.Da("prototypeName"),geometry:this.tla?a.Bd(null,"geometry"):null,prototypeId:a.Da("prototypeId"),category:a.Da("category"),defaultSize:a.Bd(null,"defaultSize"),searchKeywords:a.Bd(null,"searchKeywords"),linkPoints:a.Bd(null,"linkPoints"),outline:a.Bd(null,
"outline"),text:a.Bd(null,"text"),id:a.Bd(null,"id")}};b.prototype.Hwb=function(a,b){a.Qb(b.Da("name"));a.rk(b.Da("selectable"));a.To(b.Bd(null,"tag"));a.je(b.Bd(null,"localtransform"));a.Ba(b.Bd(null,"linestyle"));a.Ae(b.Da("id"))};b.prototype.GI=function(a){return new _geo.c.Va.$.zl(a)};b.prototype.load=function(a){var b=this.gSa(a),b=this.GI(b);this.Hwb(b,a);return b};b.prototype.save=function(a,b){b.lc("prototypeName",a.qU());this.tla&&b.Zd("geometry",a.ce());b.Zd("text",a.qm());b.lc("prototypeId",
a.sD());b.lc("category",a.ny());b.Zd("defaultSize",a.kx());b.Zd("searchKeywords",a.RQ());b.Zd("linkPoints",a.Gu());b.Zd("outline",a.gJ());b.lc("id",a.zd());b.lc("name",a.getName());b.lc("selectable",a.tx());b.Zd("tag",a.$i());b.Zd("localtransform",a.kc());b.Zd("linestyle",a.ab());b.lc("ClassName",a.getClassName());b.Cl()};return b}();
_geo.c.Va.xd.hg.$gc=function(){function b(a){void 0===a&&(a=!0);this.tla=!0;this.tla=a}_geo.c.ja(b,"geotoolkit.flowcharts.persistence.visuals.ExportDiagramVisualSerializer");_geo.c.na(b,_geo.c.xd.Wwa);b.prototype.gSa=function(a){return{prototypeName:a.Da("prototypeName"),geometry:this.tla?a.Bd(null,"geometry"):null,prototypeId:a.Da("prototypeId"),category:a.Da("category"),defaultSize:a.Bd(null,"defaultSize"),searchKeywords:a.Bd(null,"searchKeywords"),linkPoints:a.Bd(null,"linkPoints"),outline:a.Bd(null,
"outline")}};b.prototype.Hwb=function(a,b){a.Qb(b.Da("name"));a.rk(b.Da("selectable"));a.To(b.Bd(null,"tag"));a.je(b.Bd(null,"localtransform"));a.Ba(b.Bd(null,"linestyle"));a.Ae(b.Da("id"))};b.prototype.GI=function(a){return new _geo.c.Va.$.zl(a)};b.prototype.load=function(a){var b=this.gSa(a),b=this.GI(b);this.Hwb(b,a);return b};b.prototype.save=function(a,b){b.lc("prototypeName",a.qU());if(a instanceof _geo.c.Va.$.bd.aW){var e=_geo.c.Va.xd.oW.ib().Oz("default");e.save(a,b)}else b.yF(a.ce(),null);
b.Zd("localtransform",a.kc());a instanceof _geo.c.Va.$.bd.aW&&b.lc("ClassName","geotoolkit.scene.shapes.Polyline");b.Cl()};return b}();
_geo.c.Va.xd.hg.DIb=function(){function b(){}_geo.c.ja(b,"geotoolkit.flowcharts.persistence.visuals.LinkVisualSerializer");_geo.c.na(b,_geo.c.xd.Wwa);b.prototype.load=function(a){var b=_geo.c.Va.xd.oW.ib().Oz("default"),e=null;if(b&&b.load)e=b.load(a);else return null;if((b=a.Bd(null,"connections"))&&b.length)for(var d=0;d<b.length;d++){var f=b[d];e.Kn[f.bB]=f}e instanceof _geo.c.Va.$.bd.aW&&(e.searchKeywords=a.Bd(null,"searchKeywords"),e.CBb(a.Da("linkingMode")),e.kla(a.Da("tubingWidth")),e.Bbb(a.Da("linkType")));
return e};b.prototype.save=function(a,b){var e=_geo.c.Va.xd.oW.ib().Oz("default");e.save&&e.save(a,b);for(var e=[],d=0,f=a.Kn;d<f.length;d++){var h=f[d];if(h instanceof _geo.c.Va.$.bd.Eea){var l=new _geo.c.Va.$.bd.Eea(null,h.TL,h.bB,null);l.relatedVisualId=h.TCa();l.TL=new _geo.c.f.sa(h.TL.ga(),h.TL.ea());e.push(l)}}b.Zd("connections",e);b.Zd("searchKeywords",a.RQ());b.lc("linkType",a.S7a());b.lc("linkingMode",a.Etb());b.lc("tubingWidth",a.I7());b.Cl()};return b}();
_geo.c.Va.xd.hg.gKb=function(){function b(){}_geo.c.ja(b,"geotoolkit.flowcharts.persistence.visuals.PolylineVisualSerializer");_geo.c.na(b,_geo.c.xd.Wwa);b.prototype.load=function(a){var b=_geo.c.Va.xd.oW.ib().Oz("default"),e=null;if(b&&b.load)e=b.load(a);else return null;if((b=a.Bd(null,"connections"))&&b.length)for(var d=0;d<b.length;d++){var f=b[d];e.Kn[f.bB]=f}e instanceof _geo.c.Va.$.bd.o_&&(e.searchKeywords=a.Bd(null,"searchKeywords"),e.kla(a.Da("tubingWidth")),e.created=a.Da("created"));return e};
b.prototype.save=function(a,b){var e=_geo.c.Va.xd.oW.ib().Oz("default");e.save&&e.save(a,b);for(var e=[],d=0,f=a.Kn;d<f.length;d++){var h=f[d];if(h instanceof _geo.c.Va.$.bd.Eea){var l=new _geo.c.Va.$.bd.Eea(null,h.TL,h.bB,null);l.relatedVisualId=h.TCa();l.TL=new _geo.c.f.sa(h.TL.ga(),h.TL.ea());e.push(l)}}b.Zd("connections",e);b.Zd("searchKeywords",a.RQ());b.lc("tubingWidth",a.I7());b.lc("created",a.created);b.Cl()};return b}();
_geo.c.Va.xd.hg.LLb=function(){function b(a){void 0===a&&(a=!1);return _geo.c.Va.xd.hg.mwa.call(this,a)||this}_geo.c.ja(b,"geotoolkit.flowcharts.persistence.visuals.SvgVisualPluginSerializer");_geo.c.na(b,_geo.c.Va.xd.hg.mwa);b.prototype.GI=function(a){var b=new _geo.c.Va.$.dfa(a);b.zH(a.url);return b};b.prototype.gSa=function(a){var b=_geo.c.Va.xd.hg.mwa.prototype.gSa.call(this,a);b.url=a.Da("url");b.isLinkPointsRelative=a.Da("relativeLinkPoints");this.tla||(b.geometry=new _geo.c.V.Ya);b.justdeserialized=
!0;return b};b.prototype.save=function(a,b){_geo.c.Va.xd.hg.mwa.prototype.save.call(this,a,b);b.lc("relativeLinkPoints",a.I7a());a.I7a()&&b.Zd("linkPoints",a.t8a());b.lc("url",a.By());this.tla||b.lc("loaded",!1);b.Cl()};return b}();
_geo.c.Va.xd.oW=function(){function b(){}var a=null;b.ib=function(){a||(a=new b);return a};b.prototype.ER=function(a,b,d){return this.p0b().ER(a,b,d)};b.prototype.AQ=function(a){return this.p0b().AQ(a)};b.prototype.ybc=function(a,b){this.Km().bzb(a);this.Km().Gp(a,b)};b.prototype.Oz=function(a){return this.Km().Oz(a)};b.prototype.p0b=function(){this.hPb||(this.hPb=new _geo.c.xd.D9(this.Km()));return this.hPb};b.prototype.Km=function(){this.ol||(this.ol=new _geo.c.xd.he,this.ol.Gp(_geo.c.Va.$.zl.getClassName(),
new _geo.c.Va.xd.hg.mwa),this.ol.Gp(_geo.c.Va.$.dfa.getClassName(),new _geo.c.Va.xd.hg.LLb),this.ol.Gp(_geo.c.Va.$.bd.aW.getClassName(),new _geo.c.Va.xd.hg.DIb),this.ol.Gp(_geo.c.Va.$.bd.o_.getClassName(),new _geo.c.Va.xd.hg.gKb));return this.ol};return b}();
_geo.c.Va.plugins.Xt.SZ=function(){function b(){}b.q1=function(){var a=_geo.c.f.sa,g=_geo.c.f.Fc;return[new _geo.c.Va.$.bd.aW({prototypeId:"class-link",prototypeName:"Link",category:b.rp,searchKeywords:["link","arrow"],defaultIconSize:new g(100,100),geometry:new _geo.c.V.$.hr({x:[0,100],y:[1,1],visible:!0}),linkPoints:[new a(0,1),new a(1,1)],linkType:_geo.c.Va.$.uf.G9.Jr,url:"assets/svg/standard/line.svg"}),new _geo.c.Va.$.bd.aW({prototypeId:"class-steplink",prototypeName:"Steplink",category:b.rp,
searchKeywords:["link","step","arrow"],defaultIconSize:new g(100,100),geometry:new _geo.c.V.$.hr({x:[0,100],y:[1,1],visible:!0}),linkPoints:[new a(0,1),new a(1,1)],linkType:_geo.c.Va.$.uf.G9.oE,url:"assets/svg/standard/stepline.svg"}),new _geo.c.Va.$.bd.o_({prototypeId:"class-polyline",prototypeName:"Polyline",category:b.rp,searchKeywords:["link","polyline"],defaultIconSize:new g(100,100),geometry:new _geo.c.V.$.hr({x:[50],y:[1],visible:!0}),url:"assets/svg/standard/polyline.svg"}),new _geo.c.Va.$.zl({prototypeId:"class-ellipse",
prototypeName:"Ellipse",category:b.rp,searchKeywords:["ellipse"],defaultSize:new g(50,50),geometry:new _geo.c.V.$.KF({centerx:.5,centery:.5,radiusx:.5,radiusy:.5}),linkPoints:b.lfb}),new _geo.c.Va.$.zl({prototypeId:"class-rectangle",prototypeName:"Rectangle",category:b.rp,searchKeywords:["rectangle"],defaultSize:new g(50,50),geometry:new _geo.c.V.$.Th(0,0,1,1),linkPoints:b.lfb}),new _geo.c.Va.$.bd.o_({prototypeId:"class-polygon",prototypeName:"Polylgon",category:b.rp,searchKeywords:["polygon"],defaultIconSize:new g(100,
100),geometry:new _geo.c.V.$.If({x:[50],y:[1],visible:!0}),url:"assets/svg/standard/polygon.svg"}),(new _geo.c.Va.$.zl({prototypeId:"class-text",prototypeName:"Text",category:b.rp,searchKeywords:["text"],defaultSize:new g(60,25),defaultIconSize:new g(50,50),geometry:new _geo.c.V.$.Th(0,0,60,25),linkPoints:b.lfb,url:"assets/svg/standard/text.svg"})).Ec({text:"Text"})]};return b}();_geo.c.Va.plugins.Xt.SZ.rp="Standard";_geo.c.Va.plugins.Xt.SZ.Awa=new _geo.c.f.Rect(0,0,1,1);
_geo.c.Va.plugins.Xt.SZ.lfb=[_geo.c.Va.plugins.Xt.SZ.Awa.Nia(),_geo.c.Va.plugins.Xt.SZ.Awa.pca(),_geo.c.Va.plugins.Xt.SZ.Awa.hca(),_geo.c.Va.plugins.Xt.SZ.Awa.Hra(),_geo.c.Va.plugins.Xt.SZ.Awa.Xh()];
_geo.c.Va.plugins.Xt.nXa=function(){function b(){}b.q1=function(){var a,g=_geo.c.f.sa,e=_geo.c.f.Fc,d=_geo.c.Sa.yf,f=_geo.c.V.$.Dk;return g=[new _geo.c.Va.$.zl({prototypeId:"class-decision",prototypeName:"Decision",category:b.rp,searchKeywords:["decision"],defaultSize:new e(100,50),outline:a=(new d).moveTo(.5,0).lineTo(1,.5).lineTo(.5,1).lineTo(0,.5).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,.5),new g(.5,0),new g(1,.5),new g(.5,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-input-output",
prototypeName:"Input/Output",category:b.rp,searchKeywords:["input","output"],defaultSize:new e(100,50),outline:a=(new d).moveTo(.1,0).lineTo(1,0).lineTo(.9,1).lineTo(0,1).close(),geometry:new f({geometry:a}),linkPoints:[new g(.05,.5),new g(.5,0),new g(.95,.5),new g(.5,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-stored-data",prototypeName:"Stored Data",category:b.rp,searchKeywords:["data","store"],defaultSize:new e(100,50),outline:a=(new d).moveTo(0,0).lineTo(50,0).bezierCurveTo(35,0,35,50,50,50).lineTo(0,
50).bezierCurveTo(-15,50,-15,0,0,0).close(),geometry:new f({geometry:a}),linkPoints:[new g(-11.2,25),new g(18.2,0),new g(38.8,25),new g(18.2,50)]}),new _geo.c.Va.$.zl({prototypeId:"class-internal-storage",prototypeName:"Internal Storage",category:b.rp,searchKeywords:["storage","store","internal"],defaultSize:new e(100,50),outline:a=(new d).moveTo(0,0).lineTo(100,0).lineTo(100,50).lineTo(0,50).close().moveTo(10,0).lineTo(10,50).moveTo(0,10).lineTo(100,10),geometry:new f({geometry:a}),linkPoints:[new g(0,
25),new g(50,0),new g(100,25),new g(50,50)]}),new _geo.c.Va.$.zl({prototypeId:"class-process",prototypeName:"Process",category:b.rp,searchKeywords:["process"],defaultSize:new e(100,50),outline:a=(new d).moveTo(0,0).lineTo(1,0).lineTo(1,1).lineTo(0,1).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,.5),new g(.5,0),new g(1,.5),new g(.5,1),new g(.5,.5)]}),new _geo.c.Va.$.zl({prototypeId:"class-subprocess",prototypeName:"Sub Process",category:b.rp,searchKeywords:["subprocess"],defaultSize:new e(100,
50),outline:a=(new d).moveTo(0,0).lineTo(1,0).lineTo(1,1).lineTo(0,1).close().moveTo(.1,0).lineTo(.1,1).moveTo(.9,0).lineTo(.9,1),geometry:new f({geometry:a}),linkPoints:[new g(0,.5),new g(.5,0),new g(1,.5),new g(.5,1),new g(.5,.5)]}),new _geo.c.Va.$.zl({prototypeId:"class-delay",prototypeName:"Delay",category:b.rp,searchKeywords:["delay"],defaultSize:new e(100,50),outline:a=(new d).moveTo(0,0).lineTo(50,0).bezierCurveTo(75,0,75,50,50,50).lineTo(0,50).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,
25),new g(40,0),new g(70,25),new g(40,50)]}),new _geo.c.Va.$.zl({prototypeId:"class-reference-arrow",prototypeName:"Reference Arrow",category:b.rp,searchKeywords:["arrow","reference"],defaultSize:new e(100,50),outline:a=(new d).moveTo(0,10).lineTo(75,10).lineTo(75,0).lineTo(100,25).lineTo(75,50).lineTo(75,40).lineTo(0,40).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,25),new g(100,25)]}),new _geo.c.Va.$.zl({prototypeId:"class-reference-point",prototypeName:"Reference Point",category:b.rp,
searchKeywords:["point","reference"],defaultSize:new e(100,50),outline:a=(new d).moveTo(5,10).lineTo(75,10).lineTo(75,0).lineTo(100,25).lineTo(75,50).lineTo(75,40).lineTo(5,40).bezierCurveTo(-5,30,-5,20,5,10).close(),geometry:new f({geometry:a}),linkPoints:[new g(-2.7,25),new g(100,25)]}),new _geo.c.Va.$.zl({prototypeId:"class-merge",prototypeName:"Merge",category:b.rp,searchKeywords:["merge","symbol"],defaultSize:new e(25,25),outline:a=(new d).moveTo(0,0).lineTo(1,0).lineTo(.5,1).close(),geometry:new f({geometry:a}),
linkPoints:[new g(0,0),new g(.5,0),new g(1,0),new g(.5,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-extract",prototypeName:"Extract",category:b.rp,searchKeywords:["extract","symbol"],defaultSize:new e(25,25),outline:a=(new d).moveTo(.5,0).lineTo(1,1).lineTo(0,1).close(),geometry:new f({geometry:a}),linkPoints:[new g(.5,0),new g(1,1),new g(.5,1),new g(0,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-communication-line",prototypeName:"Communication",category:b.rp,searchKeywords:["communication","line"],
defaultSize:new e(25,50),outline:a=(new d).moveTo(1,0).lineTo(0,.55).lineTo(.5,.55).lineTo(0,1).lineTo(1,.45).lineTo(.5,.45).close(),geometry:new f({geometry:a}),linkPoints:[new g(1,0),new g(0,.55),new g(1,.45),new g(0,1)]})]};return b}();_geo.c.Va.plugins.Xt.nXa.rp="Flowchart";
_geo.c.Va.plugins.Xt.vXa=function(){function b(){}b.q1=function(){var a,g=_geo.c.f.sa,e=_geo.c.f.Fc,d=_geo.c.Sa.yf,f=_geo.c.V.$.Dk;return g=[new _geo.c.Va.$.zl({prototypeId:"class-hr-arki-arrow",prototypeName:"Arki Arrow",category:b.rp,searchKeywords:["arki arrow","arrow","hr"],defaultSize:new e(40,50),outline:a=(new d).moveTo(0,0).lineTo(1,.5).lineTo(0,1).lineTo(.7,.5).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,0),new g(1,.5),new g(0,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-chevron-arrow",
prototypeName:"Chevron Arrow",category:b.rp,searchKeywords:["chevron arrow","arrow","hr"],defaultSize:new e(40,50),outline:a=(new d).moveTo(0,0).lineTo(.3,0).lineTo(1,.5).lineTo(.3,1).lineTo(0,1).lineTo(.7,.5).close(),geometry:new f({geometry:a}),linkPoints:[new g(.15,0),new g(1,.5),new g(.15,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-triangle-arrow",prototypeName:"Up Arrow",category:b.rp,searchKeywords:["triangle arrow","arrow","hr"],defaultSize:new e(40,50),outline:a=(new d).moveTo(0,0).lineTo(1,
.5).lineTo(0,1).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,0),new g(1,.5),new g(0,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-small-arrow",prototypeName:"Small Arrow",category:b.rp,searchKeywords:["small arrow","arrow","hr"],defaultSize:new e(50,40),outline:a=(new d).moveTo(0,.4).lineTo(.72,.4).lineTo(.4,0).lineTo(.6,0).lineTo(1,.5).lineTo(.6,1).lineTo(.4,1).lineTo(.72,.6).lineTo(0,.6).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,.5),new g(1,.5),new g(.5,0),new g(.5,
1)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-fat-arrow",prototypeName:"Fat Arrow",category:b.rp,searchKeywords:["fat arrow","arrow","hr"],defaultSize:new e(100,40),outline:a=(new d).moveTo(0,0).lineTo(.75,.2).lineTo(.75,.08).lineTo(1,.25).lineTo(.75,.42).lineTo(.75,.3).lineTo(0,.5).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,.25),new g(1,.25)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-double-headed-arrow",prototypeName:"Doubleheaded Arrow",category:b.rp,searchKeywords:["crossed arrow",
"arrow","hr"],defaultSize:new e(100,50),outline:a=(new d).moveTo(.2,0).lineTo(.2,.15).lineTo(.75,.15).lineTo(.75,0).lineTo(1,.25).lineTo(.75,.5).lineTo(.75,.35).lineTo(.2,.35).lineTo(.2,.5).lineTo(0,.25).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,.25),new g(1,.25)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-crosss",prototypeName:"Cross",category:b.rp,searchKeywords:["cross","hr"],defaultSize:new e(100,100),outline:a=(new d).moveTo(.4,0).lineTo(.6,0).lineTo(.6,.4).lineTo(1,.4).lineTo(1,
.6).lineTo(.6,.6).lineTo(.6,1).lineTo(.4,1).lineTo(.4,.6).lineTo(0,.6).lineTo(0,.4).lineTo(.4,.4).close(),geometry:new f({geometry:a}),linkPoints:[new g(.5,.5),new g(0,.5),new g(.5,0),new g(1,.5),new g(.5,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-crosssed-arrow",prototypeName:"Crossed Arrow",category:b.rp,searchKeywords:["crossed arrow","arrow","hr"],defaultSize:new e(100,100),outline:a=(new d).moveTo(.3,.15).lineTo(.5,0).lineTo(.7,.15).lineTo(.6,.15).lineTo(.6,.4).lineTo(.85,.4).lineTo(.85,
.3).lineTo(1,.5).lineTo(.85,.7).lineTo(.85,.6).lineTo(.6,.6).lineTo(.6,.85).lineTo(.7,.85).lineTo(.5,1).lineTo(.3,.85).lineTo(.4,.85).lineTo(.4,.6).lineTo(.15,.6).lineTo(.15,.7).lineTo(0,.5).lineTo(.15,.3).lineTo(.15,.4).lineTo(.4,.4).lineTo(.4,.15).close(),geometry:new f({geometry:a}),linkPoints:[new g(.5,.5),new g(0,.5),new g(.5,0),new g(1,.5),new g(.5,1)]}),new _geo.c.Va.$.zl({prototypeId:"class-hr-split-arrow",prototypeName:"Split Arrow",category:b.rp,searchKeywords:["cross","hr"],defaultSize:new e(100,
100),outline:a=(new d).moveTo(0,.42).lineTo(.58,.42).lineTo(.9,0).lineTo(1,0).lineTo(1,.1).lineTo(.7,.5).lineTo(1,.9).lineTo(1,1).lineTo(.9,1).lineTo(.58,.58).lineTo(0,.58).close(),geometry:new f({geometry:a}),linkPoints:[new g(.5,.5),new g(0,.5),new g(.5,0),new g(1,.5),new g(.5,1)]})]};return b}();_geo.c.Va.plugins.Xt.vXa.rp="HR Arrows";
_geo.c.Va.plugins.Xt.qIa=function(){function b(){}b.q1=function(){var a,g=_geo.c.f.sa,e=_geo.c.f.Fc,d=_geo.c.Sa.yf,f=_geo.c.V.$.Dk;return g=[new _geo.c.Va.$.zl({prototypeId:"industrial-valve",prototypeName:"Valve",category:b.rp,searchKeywords:["valve","industrial"],defaultSize:new e(70,50),outline:a=(new d).moveTo(0,0).lineTo(1,1).lineTo(1,0).lineTo(0,1).close(),geometry:new f({geometry:a}),linkPoints:[new g(0,.5),new g(.5,.5),new g(1,.5)]})]};return b}();_geo.c.Va.plugins.Xt.qIa.rp="Industrial";
_geo.c.Va.plugins.Xt.qIa.Awa=new _geo.c.f.Rect(0,0,1,1);
_geo.c.Va.plugins.a_a=function(){function b(){this.DMa=[];this.GW=new _geo.c.attributes.za("rgba(170, 177, 185, 1)",2);this.tA=new _geo.c.attributes.Ha("rgba(240, 247, 255, 0.7)");this.uTa()}var a=null;b.ib=function(){a||(a=new _geo.c.Va.plugins.a_a);return a};b.prototype.uTa=function(){for(var a=0,b=_geo.c.Va.plugins.Xt.SZ.q1().concat(_geo.c.Va.plugins.Xt.nXa.q1(),_geo.c.Va.plugins.Xt.vXa.q1(),_geo.c.Va.plugins.Xt.qIa.q1());a<b.length;a++)this.Tyb(b[a])};b.prototype.G1b=function(){return this.DMa};
b.prototype.FZb=function(){return this.tA};b.prototype.fUa=function(a){this.tA=a;return this};b.prototype.GZb=function(){return this.GW};b.prototype.fUa=function(a){this.GW=a;return this};b.prototype.Tyb=function(a){function b(d){return d.sD()===a.sD()}if(a&&a.sD()){var d=_geo.c.Va.vd.wm.findIndex(this.DMa,b);0>d?this.DMa.push(a):this.DMa[d]=a}};b.prototype.re=function(a,b,d){function f(b){return b.sD()===a}var h=_geo.c.Va.vd.wm.find(this.DMa,f);if(h&&h.clone){h=h.clone();h.id=_geo.c.Va.vd.kS.NU();
h.aV&&b&&d&&h.aV(new _geo.c.f.Fc(b,d));var l=null!=h.ha?h.ha():null;if(null!=l){var k=1,m=1;0!==l.ba()&&(k=(b?b:h.kx().ba())/l.ba());0!==l.da()&&(m=(d?d:h.kx().da())/l.da());h.je(_geo.c.f.Fa.Lm(k,m))}return this.DFc(h)}return null};b.prototype.DFc=function(a){a instanceof _geo.c.V.Node&&a.ce()&&!_geo.c.$l(a,_geo.c.Va.$.dfa)&&(a.sD&&"class-text"===a.sD()?a.ce().ka({linestyle:new _geo.c.attributes.za("rgba(0, 0, 0, 0)"),fillstyle:new _geo.c.attributes.Ha("rgba(0, 0, 0, 0)")}):a.ce().ka({linestyle:this.GW?
this.GW.clone():new _geo.c.attributes.za,fillstyle:this.tA?this.tA.clone():new _geo.c.attributes.Ha}));return a};return b}();_geo.c.Va.$.lma={cf:"None",ti:"Panning",TKb:"RubberBandSelection"};
_geo.c.Va.$.UWa=function(){function b(a){_geo.c.qa.fm.call(this,a);this.tP="Panning";this.doc=new _geo.c.f.Rect(0,0,800,500);this.PJc=new _geo.c.f.Fc(1,1);this.TRb=0;this.Z2=10;this.Qta=new _geo.c.Va.vd.Lwa;this.ah();this.Rcb("RubberBandSelection")}_geo.c.na(b,_geo.c.qa.fm);_geo.c.ja(b,"geotoolkit.flowcharts.shapes.DiagramWidget");b.prototype.en=function(a,b,e){var d=a.Uc().va(),f=a.Uc().Wb();b&&b.cb(d,f,a.Uc().Fy());e&&e.cb(d,f,a.Uc().vq())};b.prototype.pan=function(a,b,e,d,f){a.CF(b,e);this.en(a,
d,f);return this};b.prototype.Qsc=function(a){var b=new _geo.c.attributes.Ha({color:new _geo.c.f.vb(255,255,255,1)}),e=new _geo.c.attributes.za("gray",2),b=(new _geo.c.V.Ya).Ea(b).Ba(e).Ed(!1).cb(a.clone()).Ga(a.clone());this.wj=new _geo.c.V.Ya;this.wj.cb(a.clone());this.wj.Qb("ShapesContainer");this.wj.Ae("ShapesContainer");this.wj.Kl(new _geo.c.V.Ek);_geo.c.Va.$.OIa.qGb&&b.Ia(new _geo.c.Va.$.FJb(this.wj,this.wG));b.Ia([this.wj]);return b};b.prototype.Jsc=function(a){this.W5=(new _geo.c.axis.bz).fu("MAJOR",
100).fu("MINOR",50).ug("MINOR",!0);this.W5.sj("MAJOR").ed("blue");this.W5.sj("EDGE").ed("darkblue");this.W5.sj("MINOR").ed("orange");this.W5.cl("MAJOR").dr("12px sans-serif");this.W5.cl("MINOR").dr("12px sans-serif");this.W5.cl("EDGE").dr("12px sans-serif");var b=(new _geo.c.axis.Xf(this.W5)).Ml(_geo.c.axis.qd.Af.Qf).setOrientation(_geo.c.axis.wd.ic).Is(_geo.c.axis.qd.uk.Qf),e=(new _geo.c.axis.Xf(this.W5)).Ml(_geo.c.axis.qd.Af.Xb).setOrientation(_geo.c.axis.wd.ic).Is(_geo.c.axis.qd.uk.Xb),d=(new _geo.c.axis.Xf(this.W5)).Ml(_geo.c.axis.qd.Af.Pd).setOrientation(_geo.c.axis.wd.jc).Is(_geo.c.axis.qd.uk.Pd),
f=(new _geo.c.axis.Xf(this.W5)).Ml(_geo.c.axis.qd.Af.De).setOrientation(_geo.c.axis.wd.jc).Is(_geo.c.axis.qd.uk.De);a={fillstyle:new _geo.c.attributes.Ha({color:"red"}),model:this.Qsc(a),keepvisiblelimits:!1,north:[b],south:[e],west:[d],east:[f]};this.Fb=(new _geo.c.V.qp(a)).MR(null);this.Fb.qb({left:0,right:0,top:0,bottom:0});this.Fb.Db(_geo.c.fa.Oa.Le).ik(this.TRb);this.Fb.Db(_geo.c.fa.Oa.Wc).ik(0);this.Fb.Db(_geo.c.fa.Oa.Sc).wl(this.TRb);this.Fb.Db(_geo.c.fa.Oa.od).wl(0);return this.Fb};b.prototype.Db=
function(a){return a===_geo.c.fa.Oa.cf?null:this.Fb.Db(a)};b.prototype.A$b=function(a){this.Fb.Uc().cb(a);this.Fb.Uc().Ga(a);this.Uc().cb(a);return this};b.prototype.ah=function(){this.wG=new _geo.c.Va.$.OIa(this.Z2);this.Fb=this.Jsc(this.doc);this.ee(new _geo.c.fa.Uk).Ia(this.Fb);this.ozc(this.Fb);this.th();this.en(this.Fb,this.Pe,this.He)};b.prototype.ozc=function(a){var b=a.Uc(),e=function(a,d){var e=b.Wb(),k=d.Wb(),e=e.ua()-k.ua();this.pan(this.Fb,e,0,a,null)}.bind(this),d=function(a,d){var e=
b.Wb(),k=d.Wb(),e=e.ta()-k.ta();this.pan(this.Fb,0,e,null,a)}.bind(this);this.Pe=(new _geo.c.controls.ia.scroll.YZ({modellimits:b.va(),visiblelimits:b.Wb(),size:10,rounded:!0})).eM(!0).addListener(_geo.c.controls.ia.scroll.Pf.aa.bn,e);this.He=(new _geo.c.controls.ia.scroll.u4({modellimits:b.va(),visiblelimits:b.Wb(),size:10,rounded:!0})).eM(!0).addListener(_geo.c.controls.ia.scroll.Pf.aa.bn,d);a.Sq(this.Pe,_geo.c.fa.Oa.Wc);a.Sq(this.He,_geo.c.fa.Oa.od)};b.prototype.th=function(){_geo.c.window.document.addEventListener("keydown",
function(a){46===a.keyCode&&this.S5a()}.bind(this));_geo.c.window.document.addEventListener("keydown",function(a){27===a.keyCode&&this.WT()}.bind(this));var a=new _geo.c.V.Cg;this.Fb.X6a().Ia(a);this.oz=new _geo.c.Va.$.uf.Deb(this.Fb.Uc(),a);this.oz.o7().tb(function(a){this.o7().FGa(a)}.bind(this));this.APb=[this.jv=this.jzc()];this.oz.zc(!0);this.nq([this.Pe.ld(),this.He.ld(),this.oz,this.nRb=this.mzc(a),(new _geo.c.controls.ia.Ol(this.Fb,"selectionTools")).add(this.APb)])};b.prototype.jzc=function(){return(new _geo.c.controls.ia.ti).zc(!0).addListener(_geo.c.controls.ia.ti.aa.kF,
function(a,b){var e=b.Mk();this.Fb.CF(e.x,e.y);this.en(this.Fb,this.Pe,this.He)}.bind(this))};b.prototype.mzc=function(a){return(new _geo.c.controls.ia.Selection(a,_geo.c.controls.ia.GM.Seb)).$U(!1).$Fa(_geo.c.controls.ia.mP.Lr).sCb(_geo.c.controls.ia.fJa.tk).Sy(function(a){return a.filter(function(a){return _geo.c.$l(a,_geo.c.Va.$.R3)||a instanceof _geo.c.dc.X9||_geo.c.$l(a,_geo.c.Va.$.bd.$Z)})}).Qb("RubberBandSelection").zc(!1).addListener(_geo.c.controls.ia.Selection.aa.Wca,function(a,b){var d=
b.getSelection();if(d){for(var f=[],h=0;h<d.length;h++)d[h].getParent()&&"ShapesContainer"===d[h].getParent().zd()&&f.push(d[h]);this.oz.zc(!0);this.oz.uda(_geo.c.Va.vd.wm.s6a([f]))}}.bind(this)).addListener(_geo.c.controls.ia.oc.aa.Rn,function(a){this.oz.zc(!0);!1===a.isEnabled()&&(this.oz.zc(!0),this.Rcb(_geo.c.Va.$.lma.ti))}.bind(this))};b.prototype.Rcb=function(a){this.APb.forEach(function(a){a.zc(!1)});var b=_geo.c.Va.$.lma.ti;a===_geo.c.Va.$.lma.TKb?this.tP!==a&&(b=a,this.nRb.zc(!0),this.oz.zc(!1)):
(this.jv.zc(!0),this.nRb.zc(!1));this.tP=b;return this};b.prototype.oYb=function(){return this.tP};b.prototype.kca=function(){var a=this.Fb.Uc().kc();return{x:a?a.Rb():1,y:a?a.hc():1}};b.prototype.so=function(a,b){a||(a=1);b||(b=a);var e=this.kca()?this.kca():{x:1,y:1};this.Fb.Nu(a/e.x,b/e.y);this.en(this.Fb,this.Pe,this.He);this.rDb();return this};b.prototype.OJ=function(){this.Nu(2)};b.prototype.PJ=function(){this.Nu(.5)};b.prototype.Nu=function(a){a?this.Fb.Nu(a,a):this.Fb.fM(new _geo.c.f.Fa);
this.rDb();this.en(this.Fb,this.Pe,this.He)};b.prototype.rDb=function(){this.oz.Occ();this.oz.stop()};b.prototype.Uc=function(){return this.wj};b.prototype.MZb=function(){return this.wj.ha().clone()};b.prototype.iia=function(a,b,e,d){this.wG.Z8(this.wj,e,d);var f=this.wG.iia(a,b);e=[];var h,l;if(f&&0<f.length){d=[];l=f[f.length-1];d.push(l);for(h=f.length-2;0<=h;h--)l.Px!==f[h].Px&&l.Fx!==f[h].Fx&&(d.push(f[h+1]),l=f[h+1]);d[0].Px===f[0].Px&&d[0].Fx===f[0].Fx||d.push(f[0]);if(3<d.length)for(h=0;h<
d.length;h++){var k=d[h],m=h<d.length-1?d[h+1]:k;l=new _geo.c.f.sa(k.Fx*this.Z2,k.Px*this.Z2);0===h?(f=k.Fx===m.Fx?a.ga()-l.ga():0,l=k.Px===m.Px?a.ea()-l.ea():0,l=new _geo.c.f.sa(m.Fx*this.Z2+f,m.Px*this.Z2+l),e.push(a,l),h++):h===d.length-2?(f=k.Fx===m.Fx?b.ga()-m.Fx*this.Z2:0,l=k.Px===m.Px?b.ea()-m.Px*this.Z2:0,l=new _geo.c.f.sa(k.Fx*this.Z2+f,k.Px*this.Z2+l),e.push(l,b),h++):e.push(l)}else 3===d.length?(e.push(a),h=new _geo.c.f.sa(d[1].Fx*this.Z2,d[1].Px*this.Z2),f=d[0].Fx===d[1].Fx?Math.abs(a.ga()-
h.ga()):0,l=d[2].Px===d[1].Px?Math.abs(b.ea()-h.ea()):0,f||l||(f=d[1].Fx===d[2].Fx?Math.abs(b.ga()-h.ga()):0,l=d[0].Px===d[1].Px?Math.abs(a.ea()-h.ea()):0),h.translate(f,l),e.push(h),e.push(b)):2>d.length&&(d=[a,b]);2===d.length&&(e.push(a),Math.abs(a.ga()-b.ga())>Math.abs(a.ea()-b.ea())?e.push(new _geo.c.f.sa((a.ga()+b.ga())/2,a.ea()),new _geo.c.f.sa((a.ga()+b.ga())/2,b.ea())):e.push(new _geo.c.f.sa(a.ga(),(b.ea()+a.ea())/2),new _geo.c.f.sa(b.ga(),(b.ea()+a.ea())/2)),e.push(b))}return e};b.prototype.getSelection=
function(){var a=[];return this.oz?a=this.oz.JPa():this.vlb=a};b.prototype.Dcb=function(){return this.oz?this.oz.Dcb():!1};b.prototype.WT=function(){this.oz&&this.oz.WT();return this};b.prototype.uda=function(a){this.oz&&this.oz.uda(a);return this};b.prototype.g4b=function(a,b){void 0===b&&(b="group of objects");if(a&&a.length){this.WT();var e=new _geo.c.dc.X9;e.Ia(a);e.Qb(b);e.Ae(_geo.c.Va.vd.kS.NU());this.Uc().Ia(e);this.uda([e])}return this};b.prototype.Ddc=function(a){if(a&&a.length){this.WT();
for(var b=0;b<a.length;b++){var e=a[b];if(e instanceof _geo.c.dc.X9){for(;0<e.cd();){var d=e.Dc(0);d.je(_geo.c.f.Fa.multiply(e.kc()?e.kc():new _geo.c.f.Fa,d.kc()?d.kc():new _geo.c.f.Fa));this.Uc().Ia(d)}this.Uc().removeChild(e)}}}return this};b.prototype.lUb=function(a){if(!a)return this;a=Array.isArray(a)?a:[a];this.Uc().removeChild(a);for(var b=0;b<a.length;b++)this.Uc().bh(this.Uc().cd(),a[b]);return this};b.prototype.J9b=function(a){if(!a)return this;a=Array.isArray(a)?a:[a];this.Uc().removeChild(a);
for(var b=0;b<a.length;b++)this.Uc().bh(0,a[b]);return this};b.prototype.fVb=function(){this.WT();this.rDb();this.Uc().Gh();return this};b.prototype.a9b=function(){this.so(1,1);this.fVb();return this};b.prototype.t9b=function(){return _geo.c.Va.xd.oW.ib().ER("model",this.Uc())};b.prototype.J5b=function(a){if(a)if(a=_geo.c.Va.xd.oW.ib().AQ(a)){a=a.Bd(null,"model");this.fVb();var b=[];if(a instanceof _geo.c.V.Ya)for(;0<a.cd();){var e=a.Dc(0);this.TAa(e);b.push(e)}this.h9b(this.TBa(b),this.TBa([this.Uc()]));
this.Uc().Qa();this.Uc().ma()}else _geo.c.warn("could not deserialize data");else _geo.c.warn("data is not present")};b.prototype.TBa=function(a){var b=[],e,d,f;for(e=0;e<a.length;e++)if(f=a[e],b.push(f),f instanceof _geo.c.V.Ya||f instanceof _geo.c.dc.X9){var h=[];for(d=0;d<f.cd();d++)h.push(f.Dc(d));b.push.apply(b,this.TBa(h))}return b};b.prototype.h9b=function(a,b){function e(d,e){if(d){var f=d.hg;!f&&d.relatedVisualId&&(f=a.find(function(a){return a instanceof _geo.c.V.Node&&a.zd()===d.relatedVisualId}),
!f&&b&&(f=b.find(function(a){return a instanceof _geo.c.V.Node&&a.zd()===d.relatedVisualId})));f?(e.Iha(f,d.bB,d.TL),d.relatedVisualId=null,d.hg=f):(e.QX(d.bB),_geo.c.warn("could not restore link to "+d.relatedVisualId))}}for(var d=0;d<a.length;d++){var f=a[d];if(f instanceof _geo.c.Va.$.bd.aW||f instanceof _geo.c.Va.$.bd.o_)if(f.userTouched=!0,f.Kn&&0<f.Kn.length){for(var h=0;h<f.Kn.length;h++){var l=f.Kn[h];e(l,f)}f.TD(!0)}}};b.prototype.lpb=function(){return this.x5a(this.getSelection())};b.prototype.qWb=
function(){var a=this.lpb();this.S5a();return a};b.prototype.S5a=function(){var a=this.oz.JPa();a.forEach(function(a){return this.GBa(a)}.bind(this));return this};b.prototype.TAa=function(a,b,e,d){void 0===e&&(e=!0);if(b){var f=b;if(a.kc&&a.ha){var h=a.kc()?a.kc().clone():new _geo.c.f.Fa;h.tC(f.ga(),f.ea());f=a.ha();e?h.translate(-f.rd(),-f.td()):h.translate(-f.ua(),-f.ta());a.je(h)}this.TAa(a);a instanceof _geo.c.Va.$.bd.o_&&(d?(b=this.Uc().Za().hb(b),this.oz.zcb([a],b,null),this.oz.zc(!0)):a.created=
!0)}else this.Uc().Ia(a);this.Iv(a);return a};b.prototype.Iv=function(a,b){if(a instanceof _geo.c.V.Ya)for(var e=0;e<a.cd();e++)this.Iv(a.Dc(e));a.xAb&&a.xAb(b?null:this)};b.prototype.GBa=function(a){var b;if(a instanceof _geo.c.Va.$.uf.v4)for(a=a.Zq(),b=0;b<a.length;b++)this.GBa(a[b]);else if(a){for(b=0;b<this.Uc().cd();b++){var e=this.Uc().Dc(b);_geo.c.$l(e,_geo.c.Va.$.bd.$Z)&&(e.QX(_geo.c.Va.$.bd.cP.TJ),e.QX(_geo.c.Va.$.bd.cP.iA))}this.Iv(a,!0);this.Uc().removeChild(a);this.oz.Occ()}return this};
b.prototype.Xpb=function(a){for(var b=0;b<a.length;b++)this.GBa(a[b]);return this};b.prototype.x5a=function(a){return _geo.c.Va.xd.oW.ib().ER("visuals",a)};b.prototype.rWb=function(a){var b=this.x5a(a);this.Xpb(a);return b};b.prototype.B7b=function(a,b){try{var e=_geo.c.Va.xd.oW.ib().AQ(a).Da("visuals"),d=null,f;for(f=0;f<e.length;f++)if(e[f]){var h=e[f].kc(),l=h?h.yb(e[f].ha()):e[f].ha().clone();d?d.zi(l):d=l}for(f=0;f<e.length;f++)if(e[f]){var k=e[f],m=d.pi(),q=b.ga()-m.ga(),p=b.ea()-m.ea(),u=k.kc()?
k.kc():new _geo.c.f.Fa;k.je(_geo.c.f.Fa.multiply(_geo.c.f.Fa.Mj(q,p),u));_geo.c.$l(k,_geo.c.Va.$.bd.$Z)&&k.Ai();k.Qa();this.TAa(k)}var t=this.TBa(e);this.h9b(t,[]);for(f=0;f<t.length;f++)t[f]&&t[f].Ae(_geo.c.Va.vd.kS.NU());this.oz.uda(e)}catch(r){}};b.prototype.o7=function(){this.Qta||(this.Qta=new _geo.c.Va.vd.Lwa);return this.Qta};return b}();_geo.c.Va.kD.SHb=function(){function b(){}_geo.c.ja(b,"geotoolkit.flowcharts.commands.ICommand");b.prototype.yh=_geo.c.Ua;b.prototype.Ala=_geo.c.Ua;return b}();
_geo.c.Va.kD.WEb=function(){function b(a){this.hg=a.visuals||[];this.n3=a.widget;this.Cc=a.center||!0;this.location=a.location||{x:0,y:0};this.NI=!1}_geo.c.Rg(b,"geotoolkit.flowcharts.commands.ICommand");_geo.c.ja(b,"geotoolkit.flowcharts.commands.AddVisual");b.prototype.yh=function(){_geo.c.$l(this.n3,_geo.c.Va.$.UWa)&&this.hg&&this.n3&&(this.n3.TAa(this.hg,this.NI?null:this.location,this.Cc),this.NI=!0);return!0};b.prototype.Ala=function(){return this.NI&&_geo.c.$l(this.n3,_geo.c.Va.$.UWa)?(this.n3.GBa(this.hg),
!0):!1};return b}();
_geo.c.Va.kD.ifa=function(){function b(a){this.Nlb=new _geo.c.f.dK;this.hg=a.visuals||[];this.kf=a.transformation||new _geo.c.f.Fa;this.NI=!1;if(this.hg)for(a=0;a<this.hg.length;a++)this.hg[a].kc()&&this.Nlb.put(this.hg[a],this.hg[a].kc())}_geo.c.Rg(b,"geotoolkit.flowcharts.commands.ICommand");_geo.c.ja(b,"geotoolkit.flowcharts.commands.TransformVisuals");b.prototype.Zcb=function(a,b){if(a&&b){var e=a.kc()?a.kc():new _geo.c.f.Fa;a.ma();a.je(e.me().Gz(b.me()).me());a.ma();return!0}return!1};b.prototype.yh=
function(){if(!this.NI&&this.hg.length&&this.kf){var a;for(a=0;a<this.hg.length;a++)this.Zcb(this.hg[a],this.kf);return this.NI=!0}return!1};b.prototype.Ala=function(){if(this.NI){var a;for(a=0;a<this.hg.length;a++)this.hg[a].je(this.Nlb.Hz(this.hg[a])?this.Nlb.get(this.hg[a]):null);this.NI=!1;return!0}return!1};return b}();
_geo.c.Va.kD.wMb=function(){function b(a){this.DWb=a.delta||{x:0,y:0};this.NI=!1;_geo.c.Va.kD.ifa.call(this,a)}_geo.c.Rg(b,"geotoolkit.flowcharts.commands.ICommand");_geo.c.na(b,_geo.c.Va.kD.ifa);_geo.c.ja(b,"geotoolkit.flowcharts.commands.TranslateVisuals");b.prototype.yh=function(){if(!this.NI&&this.hg.length){var a;for(a=0;a<this.hg.length;a++)this.Zcb(this.hg[a],_geo.c.f.Fa.Mj(this.DWb.x,this.DWb.y));return this.NI=!0}return!1};return b}();
_geo.c.Va.kD.aLb=function(){function b(a){this.J2=a.scalex||1;this.v8=a.scaley||1;this.Ez=a.anchor||_geo.c.f.Ca.Ig;this.NI=!1;_geo.c.Va.kD.ifa.call(this,a)}_geo.c.Rg(b,"geotoolkit.flowcharts.commands.ICommand");_geo.c.na(b,_geo.c.Va.kD.ifa);_geo.c.ja(b,"geotoolkit.flowcharts.commands.ScaleVisuals");b.prototype.yh=function(){if(!this.NI&&this.hg.length){var a,b,e;for(a=0;a<this.hg.length;a++)b=this.hg[a].ha(),this.hg[a].kc()&&(b=this.hg[a].kc().yb(b)),e=b.clone(),e.de(1<this.J2?b.width*this.J2/4:-(b.width-
b.width*this.J2)/2,1<this.v8?b.height*this.v8/4:-(b.height-b.height*this.v8)/2),this.Zcb(this.hg[a],_geo.c.f.Fa.Sf(b,e));return this.NI=!0}return!1};return b}();
_geo.c.Va.kD.RKb=function(){function b(a){this.Fz=a.angle||0;this.Ez=a.anchor||_geo.c.f.Ca.ub;this.NI=!1;_geo.c.Va.kD.ifa.call(this,a)}_geo.c.Rg(b,"geotoolkit.flowcharts.commands.ICommand");_geo.c.na(b,_geo.c.Va.kD.ifa);_geo.c.ja(b,"geotoolkit.flowcharts.commands.RotateVisuals");b.prototype.yh=function(){if(!this.NI&&this.hg.length){var a,b;for(a=0;a<this.hg.length;a++)b=this.hg[a].ha().clone(),this.hg[a].kc()&&(b=this.hg[a].kc().yb(b)),b=b.Cba(this.Ez),b=_geo.c.f.Fa.hp(this.Fz,b.x,b.y),this.Zcb(this.hg[a],
b);return this.NI=!0}return!1};return b}();
(function(){var b="geotoolkit",a="shapes",g="Events",e="persistence",d=_geo.c.hx,f=_geo.c.gx,h=null,l=null;d(b+".flowcharts.utils.Guid.newGuid",_geo.c.Va.vd.kS.NU);d(b+".flowcharts.utils.LiteEvent",_geo.c.Va.vd.Lwa);f(h=_geo.c.Va.vd.Lwa.prototype,"on",h.tb,{tb:0});f(h,"off",h.pb,{pb:0});f(h,"trigger",h.FGa,{FGa:0});d(b+".flowcharts.utils.Misc.flatten",(l=_geo.c.Va.vd.wm).s6a);d(b+".flowcharts.utils.Misc.addPoint",l.QT);d(b+".flowcharts.utils.Misc.removePoint",l.hab);d(b+".flowcharts.utils.Misc.removeColinearPoints",
l.OEa);d(b+".flowcharts.utils.Misc.sameLine",l.r9b);d(b+".flowcharts.utils.Misc.approximateLine",l.TTb);d(b+".flowcharts.utils.Misc.findIndex",l.findIndex);d(b+".flowcharts.utils.Misc.find",l.find);d(b+".flowcharts.utils.Misc.MAX_INT",l.bW);d(b+".flowcharts.utils.Misc.MIN_INT",l.Pwa);d(b+".flowcharts.utils.Misc.EPSILON",l.EPSILON);f(h=_geo.c.Va.vd.nKb.prototype,"enqueue",h.enqueue,{enqueue:0});f(h,"dequeue",h.Ypb,{Ypb:0});f(h,"peek",h.C7b,{C7b:0});f(h,"isEmpty",h.Jd,{Jd:0});f(h,"getCount",h.aC,{aC:0});
d(b+".flowcharts."+a+".ResourceLoader",_geo.c.Va.$.Igb);d(b+".flowcharts."+a+".ResourceLoader.loadText",_geo.c.Va.$.Igb.P5b);d(b+".flowcharts."+a+".IComponent",_geo.c.Va.$.R3);f(h=_geo.c.Va.$.R3.prototype,"getPrototypeId",h.sD,{sD:0});f(h,"getPrototypeName",h.qU,{qU:0});f(h,"getCategory",h.ny,{ny:0});f(h,"getSearchKeywords",h.RQ,{RQ:0});f(h,"getDefaultSize",h.kx,{kx:0});f(h,"setDefaultSize",h.aV,{aV:0});f(h,"getGeometry",h.ce,{ce:0});f(h,"getLinkPoints",h.Gu,{Gu:0});f(h,"setLinkPoints",h.jZ,{jZ:0});
f(h,"setText",h.Ec,{Ec:0});f(h,"setUrl",h.zH,{zH:0});f(h,"getUrl",h.By,{By:0});f(h,"getDefaultIconSize",h.dY,{dY:0});d(b+".flowcharts."+a+".connectors.LinkSide",_geo.c.Va.$.bd.cP);d(b+".flowcharts."+a+".connectors.LinkSide.Begin",(l=_geo.c.Va.$.bd.cP).TJ);d(b+".flowcharts."+a+".connectors.LinkSide.End",l.iA);d(b+".flowcharts."+a+".connectors.LinkingMode",_geo.c.Va.$.bd.Fea);d(b+".flowcharts."+a+".connectors.LinkingMode.NoLinks",(l=_geo.c.Va.$.bd.Fea).rJb);d(b+".flowcharts."+a+".connectors.LinkingMode.SingleLink",
l.rZa);d(b+".flowcharts."+a+".connectors.LinkingMode.DoubleLink",l.Heb);d(b+".flowcharts."+a+".connectors.LinkConnection",_geo.c.Va.$.bd.Eea);f(h=_geo.c.Va.$.bd.Eea.prototype,"getVisual",h.re,{re:0});f(h,"getModelPoint",h.k1b,{k1b:0});f(h,"getLinkSide",h.N0b,{N0b:0});f(h,"getLinkVisual",h.O0b,{O0b:0});f(h,"getRelatedVisualId",h.TCa,{TCa:0});d(b+".flowcharts."+a+".DiagramVisual",(l=_geo.c.Va.$).zl);f(h=_geo.c.Va.$.zl.prototype,"copyConstructor",h.fb,{fb:0});f(h,"updateState",h.Qa,{Qa:0});f(h,"render",
h.Aa,{Aa:0});f(h,"getPrototypeId",h.sD,{sD:0});f(h,"getPrototypeName",h.qU,{qU:0});f(h,"getCategory",h.ny,{ny:0});f(h,"getSearchKeywords",h.RQ,{RQ:0});f(h,"setDefaultSize",h.aV,{aV:0});f(h,"getDefaultSize",h.kx,{kx:0});f(h,"getGeometry",h.ce,{ce:0});f(h,"setLinkPoints",h.jZ,{jZ:0});f(h,"getLinkPoints",h.Gu,{Gu:0});f(h,"getOutline",h.gJ,{gJ:0});f(h,"getDefaultIconSize",h.dY,{dY:0});f(h,"setUrl",h.zH,{zH:0});f(h,"getUrl",h.By,{By:0});f(h,"setText",h.Ec,{Ec:0});f(h,"getText",h.ne,{ne:0});f(h,"setProperties",
h.ka,{ka:0});f(h,"getProperties",h.la,{la:0});d(b+".flowcharts."+a+".SvgDiagramVisual",l.dfa);f(h=_geo.c.Va.$.dfa.prototype,"setData",h.setData,{setData:0});f(h,"copyConstructor",h.fb,{fb:0});f(h,"setUrl",h.zH,{zH:0});f(h,"render",h.Aa,{Aa:0});f(h,"getIsLinkPointsRelative",h.I7a,{I7a:0});f(h,"getRelativeLinkPoints",h.t8a,{t8a:0});f(h,"getLinkPoints",h.Gu,{Gu:0});f(h,"setProperties",h.ka,{ka:0});f(h,"getProperties",h.la,{la:0});d(b+".flowcharts."+a+".connectors.ILink",(l=_geo.c.Va.$.bd).$Z);f(h=_geo.c.Va.$.bd.$Z.prototype,
"getConnections",h.Bia,{Bia:0});f(h,"updateLinks",h.TD,{TD:0});d(b+".flowcharts."+a+".connectors."+g+"",l.aa);d(b+".flowcharts."+a+".connectors."+g+".Disconnected",(l=_geo.c.Va.$.bd.aa).Eeb);d(b+".flowcharts."+a+".connectors."+g+".Connected",l.dGb);d(b+".flowcharts."+a+".connectors.LinkVisual",(l=_geo.c.Va.$.bd).aW);f(h=_geo.c.Va.$.bd.aW.prototype,"getPrototypeId",h.sD,{sD:0});f(h,"getPrototypeName",h.qU,{qU:0});f(h,"getCategory",h.ny,{ny:0});f(h,"getSearchKeywords",h.RQ,{RQ:0});f(h,"getDefaultSize",
h.kx,{kx:0});f(h,"setDefaultSize",h.aV,{aV:0});f(h,"setText",h.Ec,{Ec:0});f(h,"getGeometry",h.ce,{ce:0});f(h,"getLinkPoints",h.Gu,{Gu:0});f(h,"setLinkPoints",h.jZ,{jZ:0});f(h,"getOutline",h.gJ,{gJ:0});f(h,"getDefaultIconSize",h.dY,{dY:0});f(h,"setUrl",h.zH,{zH:0});f(h,"getUrl",h.By,{By:0});f(h,"getTextShape",h.qm,{qm:0});f(h,"getLinkType",h.S7a,{S7a:0});f(h,"setLinkType",h.Bbb,{Bbb:0});f(h,"getSymbolSize",h.Y2b,{Y2b:0});f(h,"setLinkingMode",h.CBb,{CBb:0});f(h,"getLinkingMode",h.Etb,{Etb:0});f(h,"getTubingWidth",
h.I7,{I7:0});f(h,"setTubingWidth",h.kla,{kla:0});f(h,"getBounds",h.ha,{ha:0});f(h,"clone",h.clone,{clone:0});f(h,"connectTo",h.Iha,{Iha:0});f(h,"getConnections",h.Bia,{Bia:0});f(h,"disconnectFrom",h.QX,{QX:0});f(h,"getConnectedIndexes",h.bQa,{bQa:0});f(h,"updateLinks",h.TD,{TD:0});f(h,"moveLinkHandle",h.Rca,{Rca:0});f(h,"canConnect",h.Nqa,{Nqa:0});d(b+".flowcharts."+a+".connectors.PolylineVisual",l.o_);f(h=_geo.c.Va.$.bd.o_.prototype,"getPrototypeId",h.sD,{sD:0});f(h,"getPrototypeName",h.qU,{qU:0});
f(h,"getCategory",h.ny,{ny:0});f(h,"getSearchKeywords",h.RQ,{RQ:0});f(h,"getDefaultSize",h.kx,{kx:0});f(h,"setDefaultSize",h.aV,{aV:0});f(h,"setText",h.Ec,{Ec:0});f(h,"getGeometry",h.ce,{ce:0});f(h,"getLinkPoints",h.Gu,{Gu:0});f(h,"setLinkPoints",h.jZ,{jZ:0});f(h,"getOutline",h.gJ,{gJ:0});f(h,"getDefaultIconSize",h.dY,{dY:0});f(h,"setUrl",h.zH,{zH:0});f(h,"getUrl",h.By,{By:0});f(h,"getTubingWidth",h.I7,{I7:0});f(h,"setTubingWidth",h.kla,{kla:0});f(h,"getBounds",h.ha,{ha:0});f(h,"connectTo",h.Iha,
{Iha:0});f(h,"getConnections",h.Bia,{Bia:0});f(h,"disconnectFrom",h.QX,{QX:0});f(h,"getConnectedIndexes",h.bQa,{bQa:0});f(h,"updateLinks",h.TD,{TD:0});f(h,"canConnect",h.Nqa,{Nqa:0});d(b+".flowcharts."+a+".edit.LinkSegment.First",(l=_geo.c.Va.$.uf.Mfb).TV);d(b+".flowcharts."+a+".edit.LinkSegment.Second",l.hJa);d(b+".flowcharts."+a+".edit.LinkSegment.Middle",l.BM);d(b+".flowcharts."+a+".edit.LinkSegment.FirstCorner",l.Qeb);d(b+".flowcharts."+a+".edit.LinkSegment.SecondCorner",l.Mgb);d(b+".flowcharts."+
a+".edit.LinkSegment.Corner",l.GWa);d(b+".flowcharts."+a+".edit.Side.None",(l=_geo.c.Va.$.uf.lA).cf);d(b+".flowcharts."+a+".edit.Side.Left",l.De);d(b+".flowcharts."+a+".edit.Side.Right",l.Pd);d(b+".flowcharts."+a+".edit.Side.Top",l.Xb);d(b+".flowcharts."+a+".edit.Side.Bottom",l.Qf);d(b+".flowcharts."+a+".edit.LinkType",_geo.c.Va.$.uf.G9);d(b+".flowcharts."+a+".edit.LinkType.Line",(l=_geo.c.Va.$.uf.G9).Jr);d(b+".flowcharts."+a+".edit.LinkType.Step",l.oE);f(h=_geo.c.Va.$.uf.zIa.prototype,"getFirstIndex",
h.u_b,{u_b:0});f(h,"getLastIndex",h.w0b,{w0b:0});f(h,"isFirst",h.F9a,{F9a:0});f(h=_geo.c.Va.$.uf.Hma.prototype,"setShape",h.sk,{sk:0});f(h,"onMove",h.el,{el:0});f(h,"setCursor",h.cZ,{cZ:0});f(h=_geo.c.Va.$.uf.d4.prototype,"onInitialize",h.po,{po:0});f(h,"setShape",h.sk,{sk:0});f(h,"onActiveStateChanged",h.cj,{cj:0});f(h,"onMove",h.el,{el:0});d(b+".flowcharts."+a+".edit.VirtualGroupVisual",(l=_geo.c.Va.$.uf).v4);f(h=_geo.c.Va.$.uf.v4.prototype,"setShapes",h.ACb,{ACb:0});f(h,"getShapes",h.Zq,{Zq:0});
d(b+".flowcharts."+a+".edit.VisualPluginAdapter",l.Lxa);f(h=_geo.c.Va.$.uf.Lxa.prototype,"setShape",h.sk,{sk:0});f(h,"getShapeBounds",h.SQ,{SQ:0});f(h,"onActiveStateChanged",h.cj,{cj:0});f(h,"onInitialize",h.po,{po:0});f(h,"onMove",h.el,{el:0});f(h,"setStyle",h.yg,{yg:0});d(b+".flowcharts."+a+".edit.DiagramTool",l.Deb);f(h=_geo.c.Va.$.uf.Deb.prototype,"attachToPlot",h.hw,{hw:0});f(h,"getShapeAdapters",h.A2b,{A2b:0});f(h,"dispose",h.Ra,{Ra:0});f(h,"clearSelection",h.WT,{WT:0});f(h,"startAdapter",h.zcb,
{zcb:0});f(h,"getActiveSelection",h.JPa,{JPa:0});f(h,"selectVisuals",h.uda,{uda:0});f(h,"getTextEditorEnabled",h.Sub,{Sub:0});f(h,"setTextEditorEnabled",h.Wbc,{Wbc:0});f(h,"getOnSelectionChangeEvent",h.o7,{o7:0});f(h=_geo.c.Va.$.OIa.prototype,"findPath",h.iia,{iia:0});d(b+".flowcharts."+e+".visuals.DiagramVisualSerializer",(l=_geo.c.Va.xd.hg).mwa);d(b+".flowcharts."+e+".visuals.ExportDiagramVisualSerializer",l.$gc);d(b+".flowcharts."+e+".visuals.LinkVisualSerializer",l.DIb);d(b+".flowcharts."+e+".visuals.PolylineVisualSerializer",
l.gKb);d(b+".flowcharts."+e+".visuals.SvgVisualPluginSerializer",l.LLb);d(b+".flowcharts."+e+".Serializer",_geo.c.Va.xd.oW);d(b+".flowcharts."+e+".Serializer.getInstance",_geo.c.Va.xd.oW.ib);f(h=_geo.c.Va.xd.oW.prototype,"serialize",h.ER,{ER:0});f(h,"deserialize",h.AQ,{AQ:0});f(h,"setSerializer",h.ybc,{ybc:0});f(h,"getSerializer",h.Oz,{Oz:0});d(b+".flowcharts.plugins.library.DefaultComponents",_geo.c.Va.plugins.Xt.SZ);d(b+".flowcharts.plugins.library.DefaultComponents.getComponents",(l=_geo.c.Va.plugins.Xt.SZ).q1);
d(b+".flowcharts.plugins.library.DefaultComponents.Category",l.rp);d(b+".flowcharts.plugins.library.FlowChartComponents",_geo.c.Va.plugins.Xt.nXa);d(b+".flowcharts.plugins.library.FlowChartComponents.getComponents",(l=_geo.c.Va.plugins.Xt.nXa).q1);d(b+".flowcharts.plugins.library.FlowChartComponents.Category",l.rp);d(b+".flowcharts.plugins.library.HRComponents",_geo.c.Va.plugins.Xt.vXa);d(b+".flowcharts.plugins.library.HRComponents.getComponents",(l=_geo.c.Va.plugins.Xt.vXa).q1);d(b+".flowcharts.plugins.library.HRComponents.Category",
l.rp);d(b+".flowcharts.plugins.library.IndustrialComponents",_geo.c.Va.plugins.Xt.qIa);d(b+".flowcharts.plugins.library.IndustrialComponents.getComponents",(l=_geo.c.Va.plugins.Xt.qIa).q1);d(b+".flowcharts.plugins.library.IndustrialComponents.Category",l.rp);d(b+".flowcharts.plugins.VisualFactory",_geo.c.Va.plugins.a_a);d(b+".flowcharts.plugins.VisualFactory.getInstance",_geo.c.Va.plugins.a_a.ib);f(h=_geo.c.Va.plugins.a_a.prototype,"getPlugins",h.G1b,{G1b:0});f(h,"getDefaultFillStyle",h.FZb,{FZb:0});
f(h,"setDefaultFillStyle",h.fUa,{fUa:0});f(h,"getDefaultLineStyle",h.GZb,{GZb:0});f(h,"setDefaultFillStyle",h.fUa,{fUa:0});f(h,"registerPlugin",h.Tyb,{Tyb:0});f(h,"getVisual",h.re,{re:0});d(b+".flowcharts."+a+".DiagramTools",_geo.c.Va.$.lma);d(b+".flowcharts."+a+".DiagramTools.None",(l=_geo.c.Va.$.lma).cf);d(b+".flowcharts."+a+".DiagramTools.Panning",l.ti);d(b+".flowcharts."+a+".DiagramTools.RubberBandSelection",l.TKb);d(b+".flowcharts."+a+".DiagramWidget",_geo.c.Va.$.UWa);f(h=_geo.c.Va.$.UWa.prototype,
"getAnnotation",h.Db,{Db:0});f(h,"setDiagramLimits",h.A$b,{A$b:0});f(h,"toggleTool",h.Rcb,{Rcb:0});f(h,"getActiveTool",h.oYb,{oYb:0});f(h,"getScale",h.kca,{kca:0});f(h,"setScale",h.so,{so:0});f(h,"zoomIn",h.OJ,{OJ:0});f(h,"zoomOut",h.PJ,{PJ:0});f(h,"scaleModel",h.Nu,{Nu:0});f(h,"getModel",h.Uc,{Uc:0});f(h,"getDiagramLimits",h.MZb,{MZb:0});f(h,"getSelection",h.getSelection,{getSelection:0});f(h,"stopPolylineEdit",h.Dcb,{Dcb:0});f(h,"clearSelection",h.WT,{WT:0});f(h,"selectVisuals",h.uda,{uda:0});f(h,
"groupVisuals",h.g4b,{g4b:0});f(h,"ungroupVisuals",h.Ddc,{Ddc:0});f(h,"bringToFront",h.lUb,{lUb:0});f(h,"sendToBack",h.J9b,{J9b:0});f(h,"resetDiagram",h.a9b,{a9b:0});f(h,"saveDiagram",h.t9b,{t9b:0});f(h,"loadDiagram",h.J5b,{J5b:0});f(h,"flattenVisuals",h.TBa,{TBa:0});f(h,"copySelection",h.lpb,{lpb:0});f(h,"cutSelection",h.qWb,{qWb:0});f(h,"deleteSelection",h.S5a,{S5a:0});f(h,"addVisual",h.TAa,{TAa:0});f(h,"deleteVisual",h.GBa,{GBa:0});f(h,"deleteVisuals",h.Xpb,{Xpb:0});f(h,"copyVisuals",h.x5a,{x5a:0});
f(h,"cutVisuals",h.rWb,{rWb:0});f(h,"paste",h.B7b,{B7b:0});f(h,"getOnSelectionChangeEvent",h.o7,{o7:0});d(b+".flowcharts.commands.ICommand",(l=_geo.c.Va.kD).SHb);f(h=_geo.c.Va.kD.SHb.prototype,"execute",h.yh,{yh:0});f(h,"undo",h.Ala,{Ala:0});d(b+".flowcharts.commands.AddVisual",l.WEb);f(h=_geo.c.Va.kD.WEb.prototype,"execute",h.yh,{yh:0});f(h,"undo",h.Ala,{Ala:0});d(b+".flowcharts.commands.TransformVisuals",l.ifa);f(h=_geo.c.Va.kD.ifa.prototype,"execute",h.yh,{yh:0});f(h,"undo",h.Ala,{Ala:0});d(b+
".flowcharts.commands.TranslateVisuals",l.wMb);f(h=_geo.c.Va.kD.wMb.prototype,"execute",h.yh,{yh:0});d(b+".flowcharts.commands.ScaleVisuals",l.aLb);f(h=_geo.c.Va.kD.aLb.prototype,"execute",h.yh,{yh:0});d(b+".flowcharts.commands.RotateVisuals",l.RKb);f(h=_geo.c.Va.kD.RKb.prototype,"execute",h.yh,{yh:0})})();

    return _geo;
}));
/* eslint-enable */
/* tslint:enable */